{"version":3,"file":"callbar_button_with_popover.stories-a36d8c16.js","sources":["../../recipes/buttons/callbar_button_with_popover/callbar_button_with_popover.vue","../../recipes/buttons/callbar_button_with_popover/callbar_button_with_popover_default.story.vue","../../recipes/buttons/callbar_button_with_popover/callbar_button_with_popover_variants.story.vue"],"sourcesContent":["<template>\n  <div\n    class=\"d-d-flex d-ai-center\"\n  >\n    <dt-recipe-callbar-button\n      :aria-label=\"ariaLabel\"\n      :disabled=\"disabled\"\n      :active=\"active\"\n      :danger=\"danger\"\n      :button-class=\"buttonClass\"\n      :button-width-size=\"buttonWidthSize\"\n      :text-class=\"textClass\"\n      class=\"dt-recipe--callbar-button-with-popover--main-button\"\n      @click=\"buttonClick\"\n    >\n      <slot\n        slot=\"icon\"\n        name=\"icon\"\n      />\n      <slot\n        slot=\"tooltip\"\n        name=\"tooltip\"\n      />\n      <slot />\n    </dt-recipe-callbar-button>\n    <dt-popover\n      v-if=\"showArrowButton\"\n      :id=\"id\"\n      :open=\"open\"\n      :placement=\"placement\"\n      :initial-focus-element=\"initialFocusElement\"\n      :show-close-button=\"showCloseButton\"\n      :offset=\"[0, 16]\"\n      padding=\"none\"\n      class=\"dt-recipe--callbar-button-with-popover--popover-wrapper\"\n      :dialog-class=\"['dt-recipe--callbar-button-with-popover--popover', contentClass]\"\n      header-class=\"d-d-flex d-ai-center d-fw-normal d-px12\"\n      v-bind=\"$attrs\"\n      :open-popover=\"showPopover\"\n      @opened=\"onModalIsOpened\"\n    >\n      <template #anchor>\n        <dt-button\n          circle\n          importance=\"clear\"\n          size=\"lg\"\n          :class=\"['dt-recipe--callbar-button-with-popover--arrow', { 'd-mln24': !isCompactMode }]\"\n          width=\"2rem\"\n          :aria-label=\"arrowButtonLabel\"\n          :active=\"open\"\n          @click=\"arrowClick\"\n        >\n          <template #icon>\n            <dt-icon\n              name=\"chevron-up\"\n              class=\"d-fc-black-800\"\n              size=\"200\"\n            />\n          </template>\n        </dt-button>\n      </template>\n      <slot\n        slot=\"content\"\n        name=\"content\"\n      />\n      <slot\n        slot=\"headerContent\"\n        name=\"headerContent\"\n      />\n      <slot\n        slot=\"footerContent\"\n        name=\"footerContent\"\n      />\n    </dt-popover>\n  </div>\n</template>\n\n<script>\nimport { DtButton } from '@/components/button';\nimport { DtPopover } from '@/components/popover';\nimport { DtIcon } from '@/components/icon';\nimport { DtRecipeCallbarButton } from '@/recipes/buttons/callbar_button';\nimport { CALLBAR_BUTTON_VALID_WIDTH_SIZE } from '../callbar_button/callbar_button_constants';\nimport utils from '@/common/utils';\n\nexport default {\n  name: 'DtRecipeCallbarButtonWithPopover',\n\n  components: { DtRecipeCallbarButton, DtPopover, DtButton, DtIcon },\n\n  /* inheritAttrs: false is generally an option we want to set on library\n    components. This allows any attributes passed in that are not recognized\n    as props to be passed down to another element or component using v-bind:$attrs\n    more info: https://vuejs.org/v2/api/#inheritAttrs */\n  inheritAttrs: false,\n\n  props: {\n    /**\n     * Id for the item.\n     */\n    id: {\n      type: String,\n      default () {\n        return utils.getUniqueString();\n      },\n    },\n\n    /**\n     * Aria label for the button. If empty, it takes its value from the default slot.\n     */\n    ariaLabel: {\n      type: String,\n      default: null,\n      validator: (label) => {\n        return label || this.$slots.default;\n      },\n    },\n\n    /**\n     * Aria label for the arrow. Cannot be empty.\n     */\n    arrowButtonLabel: {\n      type: String,\n      required: true,\n      validator: (label) => {\n        return !!label;\n      },\n    },\n\n    /**\n     * The direction the popover displays relative to the anchor.\n     * @values 'bottom', 'bottom-start', 'bottom-end',\n     *         'right', 'right-start', 'right-end',\n     *         'left', 'left-start', 'left-end',\n     *         'top', 'top-start', 'top-end'\n     * @default 'top'\n     */\n    placement: {\n      type: String,\n      default: 'top',\n    },\n\n    /**\n     * The element that is focused when the popover is opened. This can be an\n     * HTMLElement within the popover, a string starting with '#' which will\n     * find the element by ID. 'first' which will automatically focus\n     * the first element, or 'dialog' which will focus the dialog window itself.\n     * If the dialog is modal this prop cannot be 'none'.\n     */\n    initialFocusElement: {\n      type: String,\n      default: 'first',\n    },\n\n    /**\n     * Determines visibility for close button\n     */\n    showCloseButton: {\n      type: Boolean,\n      default: true,\n    },\n\n    /**\n     * Determines whether the button should be disabled\n     * default is false.\n     * @values true, false\n     */\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n\n    /**\n     * Forces showing the arrow, even if the button is disabled.\n     * default is false\n     * @values true, false\n     */\n    forceShowArrow: {\n      type: Boolean,\n      default: false,\n    },\n\n    /**\n     * Determines whether the button should have active styling\n     * default is false.\n     * @values true, false\n     * @see https://dialpad.design/components/button/\n     */\n    active: {\n      type: Boolean,\n      default: false,\n    },\n\n    /**\n     * Determines whether the button should have danger styling\n     * default is false.\n     * @values true, false\n     * @see https://dialpad.design/components/button/\n     */\n    danger: {\n      type: Boolean,\n      default: false,\n    },\n\n    /**\n     * Additional class name for the button wrapper element.\n     */\n    buttonClass: {\n      type: [String, Array, Object],\n      default: '',\n    },\n\n    /**\n     * Additional class name for the button text.\n     */\n    textClass: {\n      type: [String, Array, Object],\n      default: '',\n    },\n\n    /*\n     * Width size. Valid values are: 'xl', 'lg', 'md' and 'sm'.\n     */\n    buttonWidthSize: {\n      type: String,\n      default: 'xl',\n      validator: size => CALLBAR_BUTTON_VALID_WIDTH_SIZE.includes(size),\n    },\n\n    /**\n     * Additional class name for the popover content wrapper element.\n     */\n    contentClass: {\n      type: [String, Array, Object],\n      default: '',\n    },\n\n    /**\n     * To auto open the modal popover.\n     */\n    openPopover: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  emits: [\n    /**\n     * Emitted when the arrow is clicked\n     */\n    'arrowClick',\n\n    /**\n     * Native click event\n     *\n     * @event click\n     * @type {PointerEvent | KeyboardEvent}\n     */\n    'click',\n\n    /**\n     * Emitted when modal popover is opened or closed.\n     */\n    'opened',\n  ],\n\n  data () {\n    return {\n      open: false,\n    };\n  },\n\n  computed: {\n    showArrowButton () {\n      return this.forceShowArrow || !this.disabled;\n    },\n\n    isCompactMode () {\n      return this.buttonWidthSize === 'sm' || this.buttonWidthSize === 'md';\n    },\n\n    showPopover () {\n      if (!this.openPopover || this.open) {\n        return false;\n      }\n\n      return this.arrowClick();\n    },\n  },\n\n  methods: {\n    arrowClick (ev) {\n      this.$emit('arrowClick', ev);\n      return (this.open = !this.open);\n    },\n\n    buttonClick (ev) {\n      // If no listener for the click event, the button click opens the popover\n      // the same as if the arrow was clicked.\n      if (!this.$listeners.click) {\n        this.arrowClick(ev);\n      } else {\n        this.$emit('click', ev);\n      }\n    },\n\n    onModalIsOpened (isOpened) {\n      this.open = isOpened;\n      this.$emit('opened', isOpened);\n    },\n  },\n\n};\n</script>\n\n<style lang=\"less\">\n.dt-recipe--callbar-button-with-popover--arrow.d-btn--circle {\n  margin-top: var(--space-350-negative);\n  margin-left: calc(var(--space-300-negative) * 5);\n  width: var(--size-500);\n  height: var(--size-500);\n  padding: var(--space-400);\n  border-radius: var(--size-300);\n\n  &.d-btn--active {\n    background: var(--bgc-moderate-opaque);\n  }\n}\n.dt-recipe--callbar-button-with-popover--popover {\n  .d-popover__header {\n    background: var(--bgc-contrast);\n    color: var(--fc-primary-inverted);\n\n    .d-btn {\n      color: var(--fc-primary-inverted);\n    }\n  }\n\n}\n.dt-recipe--callbar-button-with-popover--button .d-tab--selected::after,\n.dt-recipe--callbar-button-with-popover--button .d-tab--selected:hover::after {\n  --tab--bgc: var(--bgc-contrast);\n}\n.dt-recipe--callbar-button-with-popover--button .tab-group {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n.dt-recipe--callbar-button-with-popover--button .tab-content {\n  flex: 1 1 100%;\n  overflow-y: auto;\n}\n</style>\n","<template>\n  <dt-recipe-callbar-button-with-popover\n    :id=\"id\"\n    :aria-label=\"ariaLabel\"\n    :arrow-button-label=\"arrowButtonLabel\"\n    :placement=\"placement\"\n    :initial-focus-element=\"initialFocusElement\"\n    :show-close-button=\"showCloseButton\"\n    :disabled=\"disabled\"\n    :force-show-arrow=\"forceShowArrow\"\n    :active=\"active\"\n    :danger=\"danger\"\n    :button-class=\"buttonClass\"\n    :button-width-size=\"buttonWidthSize\"\n    :text-class=\"textClass\"\n    :content-class=\"contentClass\"\n    :open-popover=\"openPopover\"\n    @arrow-click=\"onClick\"\n    @click=\"onClick\"\n    @opened=\"onOpened\"\n  >\n    <span\n      v-if=\"defaultSlot\"\n      v-html=\"defaultSlot\"\n    />\n    <template\n      v-if=\"icon\"\n      slot=\"icon\"\n    >\n      <dt-icon :name=\"icon\" />\n    </template>\n    <template\n      v-if=\"tooltip\"\n      slot=\"tooltip\"\n    >\n      <span v-html=\"tooltip\" />\n    </template>\n    <template #content>\n      <span v-html=\"content\" />\n    </template>\n    <template\n      v-if=\"headerContent\"\n      #headerContent\n    >\n      <span v-html=\"headerContent\" />\n    </template>\n    <template\n      v-if=\"footerContent\"\n      #footerContent\n    >\n      <span v-html=\"footerContent\" />\n    </template>\n  </dt-recipe-callbar-button-with-popover>\n</template>\n\n<script>\nimport DtRecipeCallbarButtonWithPopover from './callbar_button_with_popover.vue';\nimport { DtIcon } from '@/components/icon';\n\nexport default {\n  name: 'DtRecipeCallbarButtonWithPopoverDefault',\n  components: { DtRecipeCallbarButtonWithPopover, DtIcon },\n};\n</script>\n","<template>\n  <div class=\"d-stack16\">\n    <h3>\n      Call Bar Buttons\n    </h3>\n    <div class=\"d-d-flex d-flow16 d-fw-wrap\">\n      <dt-recipe-callbar-button-with-popover arrow-button-label=\"Open popover\">\n        Button\n        <template #icon>\n          <dt-icon name=\"record\" />\n        </template>\n        <template #tooltip>\n          Tooltip text\n        </template>\n        <template #content>\n          Body\n        </template>\n        <template #headerContent>\n          Header Content\n        </template>\n      </dt-recipe-callbar-button-with-popover>\n\n      <dt-recipe-callbar-button-with-popover\n        arrow-button-label=\"Open popover\"\n        aria-label=\"Icon only\"\n        button-width-size=\"md\"\n      >\n        <template #icon>\n          <dt-icon name=\"mic\" />\n        </template>\n        <template #tooltip>\n          Icon only\n        </template>\n        <template #content>\n          Body\n        </template>\n        <template #headerContent>\n          Header Content\n        </template>\n      </dt-recipe-callbar-button-with-popover>\n\n      <dt-recipe-callbar-button-with-popover\n        disabled\n        arrow-button-label=\"Open popover\"\n      >\n        Disabled\n        <template #icon>\n          <dt-icon name=\"mic\" />\n        </template>\n        <template #tooltip>\n          Tooltip\n        </template>\n        <template #content>\n          Body\n        </template>\n        <template #headerContent>\n          Header Content\n        </template>\n      </dt-recipe-callbar-button-with-popover>\n    </div>\n\n    <h3>\n      Active Call Bar Buttons\n    </h3>\n    <div class=\"d-d-flex d-flow16 d-fw-wrap\">\n      <dt-recipe-callbar-button-with-popover\n        active\n        arrow-button-label=\"Open popover\"\n      >\n        Button\n        <template #icon>\n          <dt-icon name=\"record\" />\n        </template>\n        <template #tooltip>\n          Tooltip text\n        </template>\n        <template #content>\n          Body\n        </template>\n        <template #headerContent>\n          Header Content\n        </template>\n      </dt-recipe-callbar-button-with-popover>\n\n      <dt-recipe-callbar-button-with-popover\n        active\n        arrow-button-label=\"Open popover\"\n        aria-label=\"Icon only\"\n        button-width-size=\"md\"\n      >\n        <template #icon>\n          <dt-icon name=\"mic\" />\n        </template>\n        <template #tooltip>\n          Icon only\n        </template>\n        <template #content>\n          Body\n        </template>\n        <template #headerContent>\n          Header Content\n        </template>\n      </dt-recipe-callbar-button-with-popover>\n\n      <dt-recipe-callbar-button-with-popover\n        active\n        disabled\n        arrow-button-label=\"Open popover\"\n      >\n        Disabled\n        <template #icon>\n          <dt-icon name=\"mic\" />\n        </template>\n        <template #tooltip>\n          Tooltip\n        </template>\n        <template #content>\n          Body\n        </template>\n        <template #headerContent>\n          Header Content\n        </template>\n      </dt-recipe-callbar-button-with-popover>\n    </div>\n  </div>\n</template>\n\n<script>\nimport DtRecipeCallbarButtonWithPopover from './callbar_button_with_popover.vue';\nimport { DtIcon } from '@/components/icon';\n\nexport default {\n  name: 'DtRecipeCallbarButtonWithPopoverVariants',\n  components: {\n    DtRecipeCallbarButtonWithPopover,\n    DtIcon,\n  },\n};\n</script>\n"],"names":["_sfc_main","DtRecipeCallbarButton","DtPopover","DtButton","DtIcon","utils","label","this","size","CALLBAR_BUTTON_VALID_WIDTH_SIZE","ev","isOpened","DtRecipeCallbarButtonWithPopover"],"mappings":"2WAqFA,MAAAA,EAAA,CACA,KAAA,mCAEA,WAAA,CAAA,sBAAAC,EAAA,UAAAC,EAAA,SAAAC,EAAA,OAAAC,CAAA,EAMA,aAAA,GAEA,MAAA,CAIA,GAAA,CACA,KAAA,OACA,SAAA,CACA,OAAAC,EAAA,iBACA,CACA,EAKA,UAAA,CACA,KAAA,OACA,QAAA,KACA,UAAAC,GACAA,GAAAC,WAAA,OAAA,OAEA,EAKA,iBAAA,CACA,KAAA,OACA,SAAA,GACA,UAAAD,GACA,CAAA,CAAAA,CAEA,EAUA,UAAA,CACA,KAAA,OACA,QAAA,KACA,EASA,oBAAA,CACA,KAAA,OACA,QAAA,OACA,EAKA,gBAAA,CACA,KAAA,QACA,QAAA,EACA,EAOA,SAAA,CACA,KAAA,QACA,QAAA,EACA,EAOA,eAAA,CACA,KAAA,QACA,QAAA,EACA,EAQA,OAAA,CACA,KAAA,QACA,QAAA,EACA,EAQA,OAAA,CACA,KAAA,QACA,QAAA,EACA,EAKA,YAAA,CACA,KAAA,CAAA,OAAA,MAAA,MAAA,EACA,QAAA,EACA,EAKA,UAAA,CACA,KAAA,CAAA,OAAA,MAAA,MAAA,EACA,QAAA,EACA,EAKA,gBAAA,CACA,KAAA,OACA,QAAA,KACA,UAAAE,GAAAC,EAAA,SAAAD,CAAA,CACA,EAKA,aAAA,CACA,KAAA,CAAA,OAAA,MAAA,MAAA,EACA,QAAA,EACA,EAKA,YAAA,CACA,KAAA,QACA,QAAA,EACA,CACA,EAEA,MAAA,CAIA,aAQA,QAKA,QACA,EAEA,MAAA,CACA,MAAA,CACA,KAAA,EACA,CACA,EAEA,SAAA,CACA,iBAAA,CACA,OAAA,KAAA,gBAAA,CAAA,KAAA,QACA,EAEA,eAAA,CACA,OAAA,KAAA,kBAAA,MAAA,KAAA,kBAAA,IACA,EAEA,aAAA,CACA,MAAA,CAAA,KAAA,aAAA,KAAA,KACA,GAGA,KAAA,YACA,CACA,EAEA,QAAA,CACA,WAAAE,EAAA,CACA,YAAA,MAAA,aAAAA,CAAA,EACA,KAAA,KAAA,CAAA,KAAA,IACA,EAEA,YAAAA,EAAA,CAGA,KAAA,WAAA,MAGA,KAAA,MAAA,QAAAA,CAAA,EAFA,KAAA,WAAAA,CAAA,CAIA,EAEA,gBAAAC,EAAA,CACA,KAAA,KAAAA,EACA,KAAA,MAAA,SAAAA,CAAA,CACA,CACA,CAEA;;;;;;;;;;0qDC7PA,MAAAX,EAAA,CACA,KAAA,0CACA,WAAA,CAAA,iCAAAY,EAAA,OAAAR,CAAA,CACA,uhDCqEA,MAAAJ,EAAA,CACA,KAAA,2CACA,WAAA,CACA,iCAAAY,EACA,OAAAR,CACA,CACA;;;;;;;;;;;;;;;;;;;;;;;;;;"}