import{D as m,a as g,e as f,V as c}from"./storybook_utils-d08f208b.js";import{D as v}from"./validation_messages-94629f07.js";import{M as b}from"./input-84b0fc93.js";import{n as x}from"./_plugin-vue2_normalizer-2bbd088e.js";const a={TEXT:"text",TEXTAREA:"textarea",PASSWORD:"password",EMAIL:"email",NUMBER:"number",DATE:"date",TIME:"time"},n={EXTRA_SMALL:"xs",SMALL:"sm",DEFAULT:"md",LARGE:"lg",EXTRA_LARGE:"xl"},y={name:"DtInput",components:{DtValidationMessages:v},mixins:[b],inheritAttrs:!1,props:{name:{type:String,default:""},type:{type:String,default:a.TEXT,validator:t=>Object.values(a).includes(t)},value:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},label:{type:String,default:""},labelVisible:{type:Boolean,default:!0},description:{type:String,default:""},size:{type:String,default:null,validator:t=>Object.values(n).includes(t)},iconSize:{type:String,default:null,validator:t=>Object.values(n).includes(t)},inputClass:{type:[String,Object,Array],default:""},inputWrapperClass:{type:[String,Object,Array],default:""},currentLength:{type:Number,default:null},retainWarning:{type:Boolean,default:!1},validate:{type:Object,default:null}},emits:["input","blur","clear","focus","focusin","focusout","update:length","update:invalid"],data(){return{descriptionSizeClasses:{lg:"d-description--lg",xl:"d-description--xl"},labelSizeClasses:{xs:"d-label--xs",sm:"d-label--sm",md:"d-label--md",lg:"d-label--lg",xl:"d-label--xl"},isInputFocused:!1,isInvalid:!1,defaultLength:0}},computed:{isTextarea(){return this.type===a.TEXTAREA},isDefaultSize(){return this.size===n.DEFAULT},isDefaultIconSize(){return this.iconSizeComputed===n.DEFAULT},iconSizeComputed(){return this.iconSize?this.iconSize:this.size},isValidSize(){return Object.values(n).includes(this.size)},isValidDescriptionSize(){return Object.values(m).includes(this.size)},inputComponent(){return this.isTextarea?"textarea":"input"},inputListeners(){return{...this.$listeners,input:t=>this.$emit("input",t.target.value),focus:t=>{this.isInputFocused=!0,this.$emit("focus",t)},blur:t=>{this.isInputFocused=!1,this.onBlur(t)}}},descriptionKey(){return`input-description-${g()}`},inputState(){return f(this.validationMessages)},defaultLengthCalculation(){return this.calculateLength(this.value)},validationProps(){var t,e,i,s,l,r,u,o,p,d;return{length:{description:(e=(t=this==null?void 0:this.validate)==null?void 0:t.length)==null?void 0:e.description,max:(s=(i=this==null?void 0:this.validate)==null?void 0:i.length)==null?void 0:s.max,warn:(r=(l=this==null?void 0:this.validate)==null?void 0:l.length)==null?void 0:r.warn,message:(o=(u=this==null?void 0:this.validate)==null?void 0:u.length)==null?void 0:o.message,limitMaxLength:(d=(p=this==null?void 0:this.validate)==null?void 0:p.length)!=null&&d.limitMaxLength?this.validate.length.limitMaxLength:!1}}},validationMessages(){return this.showLengthLimitValidation?this.formattedMessages.concat([this.inputLengthErrorMessage()]):this.formattedMessages},showInputState(){return this.showMessages&&this.inputState},inputLength(){return this.currentLength?this.currentLength:this.defaultLengthCalculation},inputLengthState(){return this.inputLength<this.validationProps.length.warn?null:this.inputLength<=this.validationProps.length.max?this.validationProps.length.warn?c.WARNING:null:c.ERROR},shouldValidateLength(){return!!(this.validationProps.length.description&&this.validationProps.length.max)},shouldLimitMaxLength(){return this.shouldValidateLength&&this.validationProps.length.limitMaxLength},showLengthLimitValidation(){return this.shouldValidateLength&&this.inputLengthState!==null&&this.validationProps.length.message&&(this.retainWarning||this.isInputFocused||this.isInvalid)},sizeModifierClass(){return this.isDefaultSize||!this.isValidSize?"":{input:{xs:"d-input--xs",sm:"d-input--sm",lg:"d-input--lg",xl:"d-input--xl"},textarea:{xs:"d-textarea--xs",sm:"d-textarea--sm",lg:"d-textarea--lg",xl:"d-textarea--xl"}}[this.inputComponent][this.size]},stateClass(){return[{input:{error:"d-input--error base-input__input--error",warning:"d-input--warning base-input__input--warning",success:"d-input--success base-input__input--success"},textarea:{error:"d-textarea--error base-input__input--error",warning:"d-textarea--warning base-input__input--warning",success:"d-textarea--success base-input__input--success"}}[this.inputComponent][this.inputState]]}},watch:{isInvalid(t){this.$emit("update:invalid",t)},value:{immediate:!0,handler(t){this.shouldValidateLength&&this.validateLength(this.inputLength),this.currentLength==null&&this.$emit("update:length",this.calculateLength(t))}}},methods:{inputClasses(){return["base-input__input",this.inputComponent==="input"?"d-input":"d-textarea",{[this.stateClass]:this.showInputState,"d-input-icon--left":this.$slots.leftIcon,"d-input-icon--right":this.$slots.rightIcon},this.sizeModifierClass,this.inputClass]},inputWrapperClasses(){return["d-input__wrapper",{[this.stateClass]:this.showInputState},this.inputWrapperClass]},calculateLength(t){return typeof t!="string"?0:[...t].length},inputLengthErrorMessage(){return{message:this.validationProps.length.message,type:this.inputLengthState}},inputIconClasses(t){const e={xs:"d-input-icon--xs",sm:"d-input-icon--sm",lg:"d-input-icon--lg",xl:"d-input-icon--xl"};return[{left:"base-input__icon--left d-input-icon--left",right:"base-input__icon--right d-input-icon--right"}[t],"d-input-icon",{[e[this.iconSizeComputed]]:!this.isDefaultIconSize},this.sizeModifierClass]},onBlur(t){var e;(e=this.$refs.container)!=null&&e.contains(t.relatedTarget)||this.$emit("blur",t)},clear(){this.$emit("input",""),this.$emit("clear")},blur(){this.$refs.input.blur()},focus(){this.$refs.input.focus()},select(){this.$refs.input.select()},getMessageKey(t,e){return`message-${t}-${e}`},validateLength(t){this.isInvalid=t>this.validationProps.length.max}}};var _=function(){var e=this,i=e._self._c;return i("div",{ref:"container",staticClass:"base-input",attrs:{"data-qa":"dt-input"}},[i("label",{staticClass:"base-input__label",attrs:{"aria-details":e.$slots.description||e.description?e.descriptionKey:void 0,"data-qa":"dt-input-label-wrapper"}},[e._t("labelSlot",function(){return[e.labelVisible&&e.label?i("div",{ref:"label",class:["base-input__label-text","d-label",e.labelSizeClasses[e.size]],attrs:{"data-qa":"dt-input-label"}},[e._v(" "+e._s(e.label)+" ")]):e._e()]}),e.$slots.description||e.description||e.shouldValidateLength?i("div",{ref:"description",class:["base-input__description","d-description","d-fd-column",e.descriptionSizeClasses[e.size]],attrs:{id:e.descriptionKey,"data-qa":"dt-input-description"}},[e.$slots.description||e.description?i("div",[e._t("description",function(){return[e._v(e._s(e.description))]})],2):e._e(),e.shouldValidateLength?i("div",{class:["d-mb2"],attrs:{"data-qa":"dt-input-length-description"}},[e._v(" "+e._s(e.validationProps.length.description)+" ")]):e._e()]):e._e(),i("div",{class:e.inputWrapperClasses(),attrs:{"read-only":e.disabled}},[e.$slots.leftIcon?i("span",{class:e.inputIconClasses("left"),attrs:{"data-qa":"dt-input-left-icon-wrapper"},on:{focusout:e.onBlur}},[e._t("leftIcon")],2):e._e(),e.isTextarea?i("textarea",e._g(e._b({ref:"input",class:e.inputClasses(),attrs:{name:e.name,disabled:e.disabled,maxlength:e.shouldLimitMaxLength?e.validationProps.length.max:null,"data-qa":"dt-input-input"},domProps:{value:e.value}},"textarea",e.$attrs,!1),e.inputListeners)):i("input",e._g(e._b({ref:"input",class:e.inputClasses(),attrs:{name:e.name,type:e.type,disabled:e.disabled,maxlength:e.shouldLimitMaxLength?e.validationProps.length.max:null,"data-qa":"dt-input-input"},domProps:{value:e.value}},"input",e.$attrs,!1),e.inputListeners)),e.$slots.rightIcon?i("span",{class:e.inputIconClasses("right"),attrs:{"data-qa":"dt-input-right-icon-wrapper"},on:{focusout:e.onBlur}},[e._t("rightIcon")],2):e._e()])],2),i("dt-validation-messages",e._b({class:e.messagesClass,attrs:{"validation-messages":e.validationMessages,"show-messages":e.showMessages,"data-qa":"dt-input-messages"}},"dt-validation-messages",e.messagesChildProps,!1))],1)},S=[],h=x(y,_,S,!1,null,null,null,null);const V=h.exports;h.exports.__docgenInfo={description:`An input field is an input control that allows users to enter alphanumeric information.
It can have a range of options and supports single line and multi-line lengths,
as well as varying formats, including numbers, masked passwords, etc.`,displayName:"DtInput",tags:{property:[{title:"property",type:{name:"Boolean"},name:"placeholder",description:"attribute"}],see:[{description:"https://dialpad.design/components/input.html",title:"see"}]},exportName:"default",props:[{name:"messagesClass",mixin:{name:"Messages Mixin",path:"../../common/mixins/input.js"},description:"Used to customize the validation messages component",type:{name:"string|array|object"},defaultValue:{func:!1,value:"''"}},{name:"messagesChildProps",mixin:{name:"Messages Mixin",path:"../../common/mixins/input.js"},description:"A set of props that are passed into the validation messages component",type:{name:"object"},defaultValue:{func:!1,value:"{}"}},{name:"showMessages",mixin:{name:"Messages Mixin",path:"../../common/mixins/input.js"},description:"Used to hide / show the validation messages",tags:{},values:["true","false"],type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"messages",mixin:{name:"Messages Mixin",path:"../../common/mixins/input.js"},description:"Validation messages",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"name",description:"Name property of the input element",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"type",description:"Type of the input, one of: `text`, `password`, `email`, `number`, `textarea`, 'date', 'time'.\nWhen `textarea` a `<textarea>` element will be rendered instead of an `<input>` element.",tags:{},values:["text","password","email","number","textarea","date","time"],type:{name:"string"},defaultValue:{func:!1,value:"INPUT_TYPES.TEXT"}},{name:"value",description:"Value of the input",type:{name:"string|number"},defaultValue:{func:!1,value:"''"}},{name:"disabled",description:"Disables the input",tags:{},values:["true","false"],type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"label",description:"Label for the input",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"labelVisible",description:"Determines visibility of input label.",tags:{},values:["true","false"],type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"description",description:"Description for the input",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"size",description:"Size of the input, one of `xs`, `sm`, `md`, `lg`, `xl`",tags:{},values:["null","xs","sm","md","lg","xl"],type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"iconSize",description:"Size of the icon. One of `xs`, `sm`, `md`, `lg`, `xl`. If you do not set this the icon will size relative\nto the input size",tags:{},values:["null","xs","sm","md","lg","xl"],type:{name:"string"},defaultValue:{func:!1,value:"null"}},{name:"inputClass",description:`Additional class name for the input element.
Can accept String, Object, and Array, i.e. has the
same API as Vue's built-in handling of the class attribute.`,type:{name:"string|object|array"},defaultValue:{func:!1,value:"''"}},{name:"inputWrapperClass",description:`Additional class name for the input wrapper element.
Can accept all of String, Object, and Array, i.e. has the
same api as Vue's built-in handling of the class attribute.`,type:{name:"string|object|array"},defaultValue:{func:!1,value:"''"}},{name:"currentLength",description:`The current character length that the user has entered into the input.
This will only need to be used if you are using \`validate.length\` and
the string contains abnormal characters.
For example, an emoji could take up many characters in the input, but should only count as 1 character.
If no number is provided, a built-in length calculation will be used for the length validation.`,type:{name:"number"},defaultValue:{func:!1,value:"null"}},{name:"retainWarning",description:"Whether the input will continue to display a warning validation message even if the input has lost focus.",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"validate",description:'Validation for the input. Supports maximum length validation with the structure:\n`{ "length": {"description": string, "max": number, "warn": number, "message": string,\n"limitMaxLength": boolean }}`',type:{name:"object"},defaultValue:{func:!1,value:"null"}}],events:[{name:"input",description:"Native input event",type:{names:["String"]}},{name:"blur",description:"Native input blur event",type:{names:["FocusEvent"]}},{name:"clear",description:"Input clear event"},{name:"focus",description:"Native input focus event",type:{names:["FocusEvent"]}},{name:"focusin",description:"Native input focusin event",type:{names:["FocusEvent"]}},{name:"focusout",description:"Native input focusout event",type:{names:["FocusEvent"]}},{name:"update:length",description:"Length of the input when currentLength prop is not passed",type:{names:["Number"]}},{name:"update:invalid",description:"Result of the input validation",type:{names:["Boolean"]}}],slots:[{name:"labelSlot",description:"slot for label, defaults to label prop"},{name:"description",description:"slot for description, defaults to description prop"},{name:"leftIcon",description:"Slot for left icon"},{name:"rightIcon",description:"Slot for right icon"}],sourceFiles:["/home/runner/work/dialtone-vue/dialtone-vue/common/mixins/input.js","/home/runner/work/dialtone-vue/dialtone-vue/components/input/input.vue"]};export{V as D,n as I,a};
//# sourceMappingURL=input-ee933076.js.map
