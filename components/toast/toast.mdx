import { Canvas, Story, Subtitle, ArgsTable, PRIMARY_STORY } from '@storybook/addon-docs/blocks';

# Toast

<Subtitle>
  A toast notice, sometimes called a snackbar, is a time-based message that appears based on users' actions.
  It contains at-a-glance information about outcomes and can be paired with actions.
</Subtitle>

## Base Style

<Canvas>
  <Story id="components-toast--default" />
</Canvas>

## Variants

<Canvas>
  <Story id="components-toast--variants" />
</Canvas>

## Slots, Props & Events

<ArgsTable story={PRIMARY_STORY} />

## Usage

### Import

```jsx
import { DtToast } from '@dialpad/dialtone-vue';
```

### Basic usage with named slots

```html
<template>
  <dt-toast
    :show="isShown"
    @close="isShown = false"
  >
    <template #anchor="{ attrs }">
      <dt-button
        v-bind="attrs"
        @click="isShowing = true"
      >
        Click to open
      </dt-button>
    </template>
    <span>
      Message body with
      <a
        href="#"
        class="d-link"
        :class="linkClass"
      >a link</a>.
    </span>
    <template #action>
      <dt-button
        size="sm"
        importance="outlined"
        :kind="buttonKind"
      >
        Action
      </dt-button>
    </template>
    <template #icon>
      <component :is="icon" />
    </template>
    <template #titleOverride>
      <span v-html="titleOverride" />
    </template>
  </dt-toast>
</template>

<script>
import { DtToast } from '@dialpad/dialtone-vue';

export default {
  components: { DtToast },
  data () {
    return {
      isShown: false,
    }
  },
}
</script>
```

### Attaching elements to the DOM

> To ensure the best possible performance, it's recommended to not attach elements directly to the `body` element,
but instead create a `div` element right within the `body` and use it as container of your toast. [more information.](https://popper.js.org/docs/v2/performance/#attaching-elements-to-the-dom)

## Accessibility

`role="status"` is the default role attribute, and it's recommended to use this role unless you want to show an
error message where `role="alert"` will be valid. Take into account that if you invoke multiple toasts
with `role="alert"`, screen readers could override its speech queue and causes to miss a toast message.

### Anchor

The anchor element that activates the toast should be fully accessible by keyboard. The easiest way to do this is by
using an element like an `DtButton` that is already accessible. The user should also be able to close the toast
content using the `ESC` key for most ARIA roles.

There are some required ARIA attributes for the anchor element (such as `aria-expanded` set based on `open` and
`aria-haspopup` that matches the `role`). To make this as straightforward as possible, these ARIA attributes are passed
with the correct values as the `attrs` slot-scope to the anchor slot. Applying them is as simple as using `v-bind`:

```html
<template #anchor="{ attrs }">
  <dt-button v-bind="attrs">I'm accessible now!</dt-button>
</template>
```

By default, the dialog content will be labeled by the entire anchor element. To change this, you can do one of 2 things:

1. Pass `aria-label`, which is the text label that will be applied to the dialog content.
2. Pass `aria-labelledby`, which is an ID of the element that should be used as the descriptive label.

### Events

`close` is fired when close button is clicked.

### With duration

It's recommended to use a time of at least 6000 ms (minimum duration and default value) to give users enough time
to read the toast. Take into account that the time necessary to read and comprehend the message could vary in users.
For instance, users using assistive technology, or users with language barriers could potentially need more time to
read and understand the message.

```html
<dt-toast
  title="Title"
  message="Message"
  :duration="7500"
/>
```
