<template>
  <div
    data-qa="dt-popover-header-footer"
    :class="[
      'd-d-flex',
      'd-ai-flex-start',
      'd-fs16',
      'd-fw-bold',
      'd-of-auto',
      'd-hmn48',
      'd-w100p',
      'd-pl12',
      'd-pr8',
      'd-py6',
      'd-baw1',
      'd-bc-black-075',
      {
        'd-bb': type === 'header',
        'd-bt': type === 'footer',
        'd-bs-card': hasBoxShadow,
        'd-jc-space-between': $slots.content,
        'd-jc-flex-end': !$slots.content,
      },
      wrapperClass,
    ]"
  >
    <div
      v-if="$slots.content"
      data-qa="dt-popover-header-footer-content"
      class="d-to-ellipsis d-pt6"
    >
      <slot name="content" />
    </div>
    <div
      v-if="showCloseButton"
      class="d-pl6 d-d-flex d-ws-nowrap"
    >
      <dt-button
        ref="popover__close-button"
        class="d-p6 d-bc-transparent"
        importance="outlined"
        kind="muted"
        circle
        v-bind="closeButtonProps"
        @click="$emit('close')"
      >
        <template #icon>
          <icon-close
            class="d-svg--size20"
          />
        </template>
      </dt-button>
    </div>
  </div>
</template>

<script>
import DtButton from '../button/button';
import IconClose from '@dialpad/dialtone/lib/dist/vue/icons/IconClose';
export default {
  name: 'PopoverHeaderFooter',
  components: {
    DtButton,
    IconClose,
  },

  props: {
    // eslint-disable-next-line vue/require-default-prop
    type: {
      type: String,
      validator: function (value) {
        return ['header', 'footer'].indexOf(value) !== -1;
      },
    },

    /**
     * Additional class name for the content wrapper element.
     */
    wrapperClass: {
      type: [String, Array, Object],
      default: '',
    },

    /**
     * Determines visibility for close button
     */
    showCloseButton: {
      type: Boolean,
      default: false,
    },

    /**
     * A set of props to be passed into the popover's header close button.
     * Requires an 'ariaLabel' property.
     */
    closeButtonProps: {
      type: Object,
      default: () => {},
    },

    /**
     * Determines fixed / sticky styles for popover header
     */
    hasBoxShadow: {
      type: Boolean,
      default: false,
    },
  },

  methods: {
    focusCloseButton () {
      const closeButton = this.$refs['popover__close-button']?.$el;
      closeButton?.focus();
    },
  },
};
</script>
