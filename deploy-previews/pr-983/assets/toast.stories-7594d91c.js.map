{"version":3,"file":"toast.stories-7594d91c.js","sources":["../../components/toast/toast_constants.js","../../components/toast/toast.vue","../../components/toast/toast_default.story.vue"],"sourcesContent":["export const TOAST_ROLES = ['status', 'alert'];\nexport const TOAST_MIN_DURATION = 6000;\n\nexport default {\n  TOAST_ROLES,\n  TOAST_MIN_DURATION,\n};\n","<template>\n  <div\n    v-if=\"isShown\"\n    :class=\"[\n      'd-toast',\n      kindClass,\n      { 'd-toast--important': important },\n    ]\"\n    data-qa=\"dt-toast\"\n    :aria-hidden=\"(!isShown).toString()\"\n  >\n    <div class=\"d-toast__dialog\">\n      <dt-notice-icon\n        :kind=\"kind\"\n      >\n        <!-- @slot Slot for custom icon -->\n        <slot name=\"icon\" />\n      </dt-notice-icon>\n      <dt-notice-content\n        :title-id=\"titleId\"\n        :content-id=\"contentId\"\n        :title=\"title\"\n        :role=\"role\"\n      >\n        <template #titleOverride>\n          <!-- @slot Allows you to override the title, only use this if you need to override\n          with something other than text. Otherwise use the \"title\" prop. -->\n          <slot name=\"titleOverride\" />\n        </template>\n        <!-- @slot the main textual content of the toast -->\n        <slot>\n          {{ message }}\n        </slot>\n      </dt-notice-content>\n      <dt-notice-action\n        :hide-close=\"hideClose\"\n        :close-button-props=\"closeButtonProps\"\n        :visually-hidden-close=\"visuallyHiddenClose\"\n        :visually-hidden-close-label=\"visuallyHiddenCloseLabel\"\n        @close=\"closeToast\"\n      >\n        <!-- @slot Enter a possible action for the user to take, such as a link to another page -->\n        <slot name=\"action\" />\n      </dt-notice-action>\n    </div>\n  </div>\n</template>\n\n<script>\nimport DtNoticeIcon from '../notice/notice_icon.vue';\nimport DtNoticeContent from '../notice/notice_content.vue';\nimport DtNoticeAction from '../notice/notice_action.vue';\nimport { NOTICE_KINDS } from '../notice/notice_constants';\nimport util from '@/common/utils';\nimport { TOAST_ROLES, TOAST_MIN_DURATION } from './toast_constants';\nimport SrOnlyCloseButtonMixin from '../../common/mixins/sr_only_close_button';\n\n/**\n * A toast notice, sometimes called a snackbar, is a time-based message that appears based on users' actions.\n * It contains at-a-glance information about outcomes and can be paired with actions.\n * @see https://dialpad.design/components/toast.html\n */\nexport default {\n  name: 'DtToast',\n\n  components: {\n    DtNoticeIcon,\n    DtNoticeContent,\n    DtNoticeAction,\n  },\n\n  mixins: [SrOnlyCloseButtonMixin],\n\n  props: {\n    /**\n     * Sets an ID on the title element of the component. Useful for aria-describedby\n     * or aria-labelledby or any other reason you may need an id to refer to the title.\n     */\n    titleId: {\n      type: String,\n      default () { return util.getUniqueString(); },\n    },\n\n    /**\n     * Sets an ID on the content element of the component. Useful for aria-describedby\n     * or aria-labelledby or any other reason you may need an id to refer to the content.\n     */\n    contentId: {\n      type: String,\n      default () { return util.getUniqueString(); },\n    },\n\n    /**\n     * Title header of the toast. This can be left blank to remove the title from the toast entirely.\n     */\n    title: {\n      type: String,\n      default: '',\n    },\n\n    /**\n     * Message of the toast. Overridden by default slot.\n     */\n    message: {\n      type: String,\n      default: '',\n    },\n\n    /**\n     * Provides a role for the toast. 'status' is used by default to communicate a message. 'alert' is used to\n     * communicate an important message like an error that does not contain any interactive elements.\n     * @values status, alert\n     */\n    role: {\n      type: String,\n      default: 'status',\n      validator: (role) => {\n        return TOAST_ROLES.includes(role);\n      },\n    },\n\n    /**\n     * Severity level of the toast, sets the icon and background\n     * @values base, error, info, success, warning\n     */\n    kind: {\n      type: String,\n      default: 'base',\n      validator: (kind) => {\n        return NOTICE_KINDS.includes(kind);\n      },\n    },\n\n    /**\n     * Used in scenarios where the message needs to visually dominate the screen.\n     * @values true, false\n     */\n    important: {\n      type: Boolean,\n      default: false,\n    },\n\n    /**\n     * Controls whether the toast is shown. If a valid duration is provided, the toast will disappear\n     * after reaching the duration time, so it's convenient to use `v-model` with this prop to update\n     * the data in your component.\n     * Supports v-model\n     * @values true, false\n     */\n    show: {\n      type: Boolean,\n      default: false,\n    },\n\n    /**\n     * Props for the toast close button.\n     */\n    closeButtonProps: {\n      type: Object,\n      default: () => ({}),\n    },\n\n    /**\n     * Hides the close button from the toast\n     * @values true, false\n     */\n    hideClose: {\n      type: Boolean,\n      default: false,\n    },\n\n    /**\n     * The duration in ms the toast will display before disappearing.\n     * The toast won't disappear if the duration is not provided.\n     * If it's provided, it should be equal to or greater than 6000.\n     */\n    duration: {\n      type: Number,\n      default: null,\n      validator: (duration) => {\n        return duration >= TOAST_MIN_DURATION;\n      },\n    },\n  },\n\n  emits: [\n    /**\n     * Close button click event\n     *\n     * @event close\n     */\n    'close',\n\n    /**\n     * Native click event\n     *\n     * @event click\n     * @type {PointerEvent | KeyboardEvent}\n     */\n    'click',\n\n    /**\n     * Sync show value\n     *\n     * @event update:show\n     */\n    'update:show',\n  ],\n\n  data () {\n    return {\n      isShown: false,\n      minDuration: TOAST_MIN_DURATION,\n    };\n  },\n\n  computed: {\n    kindClass () {\n      const kindClasses = {\n        error: 'd-toast--error',\n        info: 'd-toast--info',\n        success: 'd-toast--success',\n        warning: 'd-toast--warning',\n        base: 'd-toast--base',\n      };\n\n      return kindClasses[this.kind];\n    },\n\n    shouldSetTimeout () {\n      return !!this.duration && this.duration >= this.minDuration;\n    },\n  },\n\n  watch: {\n    show: {\n      handler: function (show) {\n        this.isShown = show;\n        if (show) {\n          this.setTimeout();\n        } else {\n          clearTimeout(this.displayTimer);\n        }\n      },\n\n      immediate: true,\n    },\n  },\n\n  unmounted () {\n    clearTimeout(this.displayTimer);\n  },\n\n  methods: {\n    closeToast (event) {\n      this.$emit('update:show', false);\n      this.$emit('close', event);\n    },\n\n    setTimeout () {\n      if (this.shouldSetTimeout) {\n        this.displayTimer = setTimeout(() => {\n          this.isShown = false;\n          this.$emit('update:show', false);\n        }, this.duration);\n      }\n    },\n  },\n};\n</script>\n","<template>\n  <div>\n    <dt-button @click=\"buttonClicked\">\n      Click to show!\n    </dt-button>\n\n    <aside class=\"d-toast-wrapper\">\n      <dt-toast\n        ref=\"toast\"\n        v-model:show=\"isShown\"\n        :kind=\"$attrs.kind\"\n        :title=\"$attrs.title\"\n        :message=\"$attrs.message\"\n        :title-id=\"$attrs.titleId\"\n        :content-id=\"$attrs.contentId\"\n        :important=\"$attrs.important\"\n        :hide-close=\"$attrs.hideClose\"\n        :duration=\"$attrs.duration\"\n        :close-button-props=\"buttonCloseProps\"\n        :visually-hidden-close=\"$attrs.visuallyHiddenClose\"\n        :visually-hidden-close-label=\"$attrs.visuallyHiddenCloseLabel\"\n        @close=\"$attrs.onClose($event)\"\n      >\n        <span\n          v-if=\"defaultSlot\"\n          v-html=\"defaultSlot\"\n        />\n        <span v-else>\n          Message body with\n          <a\n            href=\"#\"\n            class=\"d-link\"\n            :class=\"linkClass\"\n          >a link</a>.\n        </span>\n\n        <template #action>\n          <span\n            v-if=\"$attrs.action\"\n            v-html=\"$attrs.action\"\n          />\n          <dt-button\n            v-else\n            size=\"sm\"\n            importance=\"outlined\"\n            :kind=\"buttonKind\"\n            @click=\"$attrs.onClick\"\n          >\n            Action\n          </dt-button>\n        </template>\n        <template\n          v-if=\"$attrs.icon\"\n          #icon\n        >\n          <dt-icon :name=\"$attrs.icon\" />\n        </template>\n        <template\n          v-if=\"$attrs.titleOverride\"\n          #titleOverride\n        >\n          <span v-html=\"$attrs.titleOverride\" />\n        </template>\n      </dt-toast>\n    </aside>\n  </div>\n</template>\n\n<script>\nimport DtToast from './toast.vue';\nimport DtButton from '../button/button.vue';\nimport { DtIcon } from '@/components/icon';\n\nexport default {\n  name: 'ToastDefault',\n\n  components: { DtToast, DtButton, DtIcon },\n\n  data () {\n    return {\n      isShown: this.$attrs.show,\n    };\n  },\n\n  computed: {\n    shouldInvertButton () {\n      return this.$attrs.kind === 'base' || this.$attrs.kind === 'error' || this.$attrs.kind === 'info';\n    },\n\n    isInverted () {\n      return this.$attrs.important && this.shouldInvertButton;\n    },\n\n    buttonKind () {\n      return this.isInverted ? 'inverted' : 'muted';\n    },\n\n    linkClass () {\n      return this.isInverted ? 'd-link--inverted' : 'd-link--muted';\n    },\n\n    buttonCloseProps () {\n      return {\n        ...this.$attrs.closeButtonProps,\n        kind: this.buttonKind,\n        ariaLabel: 'Close',\n      };\n    },\n  },\n\n  watch: {\n    show: function (show) {\n      this.isShown = show;\n    },\n  },\n\n  methods: {\n    buttonClicked () {\n      this.isShown = true;\n    },\n  },\n};\n</script>\n"],"names":["TOAST_ROLES","TOAST_MIN_DURATION","_sfc_main","DtNoticeIcon","DtNoticeContent","DtNoticeAction","SrOnlyCloseButtonMixin","util","role","kind","NOTICE_KINDS","duration","show","event","_hoisted_2","$data","_createElementBlock","_normalizeClass","$options","$props","_createElementVNode","_createVNode","_component_dt_notice_icon","_createCommentVNode","_renderSlot","_ctx","_component_dt_notice_content","_component_dt_notice_action","DtToast","DtButton","DtIcon","_hoisted_1","_component_dt_button","_component_dt_toast","$event","_cache","_createBlock","_hoisted_3","_component_dt_icon"],"mappings":"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"}