{"version":3,"file":"message_input.stories-72504fba.js","sources":["../../recipes/conversation_view/message_input/message_input.vue","../../recipes/conversation_view/message_input/message_input_default.story.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- TODO: A purpose-built place to display validation errors using DtBanner -->\n    <div\n      class=\"d-d-flex d-fd-column d-bar8 d-baw1 d-ba d-c-text\"\n      :class=\"{ 'd-bc-black-500 d-bs-sm': hasFocus, 'd-bc-black-300': !hasFocus }\"\n    >\n      <!-- Some wrapper to restrict the height and show the scrollbar -->\n      <div class=\"d-of-auto d-mx16 d-mt8 d-mb4 d-hmx40p\">\n        <dt-rich-text-editor\n          v-model=\"inputValue\"\n          :editable=\"editable\"\n          :input-aria-label=\"inputAriaLabel\"\n          :input-class=\"inputClass\"\n          :output-format=\"outputFormat\"\n          :auto-focus=\"autoFocus\"\n          :link=\"link\"\n          :placeholder=\"placeholder\"\n          v-bind=\"$attrs\"\n        />\n      </div>\n      <!-- @slot Slot for attachment carousel -->\n      <slot name=\"middle\" />\n      <!-- Section for the bottom UI -->\n      <section class=\"d-d-flex d-jc-space-between d-mx8 d-my4\">\n        <!-- Left content -->\n        <div class=\"d-d-flex\">\n          <dt-button\n            size=\"sm\"\n            circle\n            importance=\"clear\"\n          >\n            <template #icon>\n              <dt-icon\n                name=\"image\"\n                size=\"300\"\n              />\n            </template>\n          </dt-button>\n          <dt-button\n            size=\"sm\"\n            circle\n            importance=\"clear\"\n            @click=\"toggleEmojiPicker\"\n          >\n            <template #icon>\n              <dt-icon\n                name=\"satisfied\"\n                size=\"300\"\n              />\n            </template>\n          </dt-button>\n          <div\n            v-if=\"emojiPickerOpened\"\n            class=\"d-ps-absolute\"\n          >\n            <dt-emoji-picker\n              :tab-set-labels=\"tabSetLabels\"\n              :skin-selector-button-tooltip-label=\"skinSelectorButtonTooltipLabel\"\n              :search-no-results-label=\"searchNoResultsLabel\"\n              :search-results-label=\"searchResultsLabel\"\n              :search-placeholder-label=\"searchPlaceholderLabel\"\n              :skin-tone=\"skinTone\"\n              @skin-tone=\"skinTone = $event\"\n              @selected-emoji=\"onSelectEmoji\"\n              @close=\"emojiPickerOpened = false\"\n            />\n          </div>\n        </div>\n        <!-- Right content -->\n        <div class=\"d-d-flex\">\n          <!-- Optionally displayed remaining character counter -->\n          <p\n            v-if=\"displayCharacterLimitWarning\"\n            class=\"d-fc-error d-mr16 d-as-center dt-message-input--remaining-char\"\n          >\n            {{ characterLimitCount - inputLength }}\n          </p>\n          <!-- Right positioned UI - send button -->\n          <dt-button\n            size=\"sm\"\n            circle\n            importance=\"primary\"\n            :class=\"{ 'message-input-button__disabled': isSendDisabled }\"\n            :aria-disabled=\"isSendDisabled\"\n            @click=\"onSend\"\n          >\n            <template #icon>\n              <dt-icon\n                name=\"send\"\n                size=\"300\"\n              />\n            </template>\n          </dt-button>\n        </div>\n      </section>\n    </div>\n    <section class=\"d-d-flex d- d-jc-space-between d-h24\">\n      <div>\n        <!-- @slot Slot for helper text. Who is typing can go here -->\n        <slot name=\"footerLeft\" />\n      </div>\n      <div>\n        <!-- @slot helper text for the input. Shift + enter for new line -->\n        <slot name=\"footerRight\" />\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport {\n  DtRichTextEditor,\n  RICH_TEXT_EDITOR_OUTPUT_FORMATS,\n  RICH_TEXT_EDITOR_AUTOFOCUS_TYPES,\n} from '@/components/rich_text_editor';\nimport { DtButton } from '@/components/button';\nimport { DtIcon } from '@/components/icon';\nimport { DtEmojiPicker } from '@/components/emoji_picker';\n\nexport default {\n  name: 'DtRecipeMessageInput',\n\n  components: {\n    DtButton,\n    DtEmojiPicker,\n    DtIcon,\n    DtRichTextEditor,\n  },\n\n  mixins: [],\n\n  inheritAttrs: false,\n\n  props: {\n    /**\n     * Value of the input. The object format should match TipTap's JSON\n     * document structure: https://tiptap.dev/guide/output#option-1-json\n     */\n    value: {\n      type: [Object, String],\n      default: '',\n    },\n\n    /**\n     * Whether the input is editable\n     */\n    editable: {\n      type: Boolean,\n      default: true,\n    },\n\n    /**\n     * Descriptive label for the input element\n     */\n    inputAriaLabel: {\n      type: String,\n      required: true,\n    },\n\n    /**\n     * Additional class name for the input element. Only accepts a String value\n     * because this is passed to the editor via options. For multiple classes,\n     * join them into one string, e.g. \"d-p8 d-hmx96\"\n     */\n    inputClass: {\n      type: String,\n      default: '',\n    },\n\n    /**\n     * Whether the input should receive focus after the component has been\n     * mounted. Either one of `start`, `end`, `all` or a Boolean or a Number.\n     * - `start`  Sets the focus to the beginning of the input\n     * - `end`    Sets the focus to the end of the input\n     * - `all`    Selects the whole contents of the input\n     * - `Number` Sets the focus to a specific position in the input\n     * - `true`   Defaults to `start`\n     * - `false`  Disables autofocus\n     * @values true, false, start, end, all, number\n     */\n    autoFocus: {\n      type: [Boolean, String, Number],\n      default: false,\n      validator (autoFocus) {\n        if (typeof autoFocus === 'string') {\n          return RICH_TEXT_EDITOR_AUTOFOCUS_TYPES.includes(autoFocus);\n        }\n        return true;\n      },\n    },\n\n    /**\n     * The output format that the editor uses when emitting the \"@input\" event.\n     * One of `text`, `json`, `html`. See https://tiptap.dev/guide/output for\n     * examples.\n     * @values text, json, html\n     */\n    outputFormat: {\n      type: String,\n      default: 'text',\n      validator (outputFormat) {\n        return RICH_TEXT_EDITOR_OUTPUT_FORMATS.includes(outputFormat);\n      },\n    },\n\n    /**\n     * Enables the Link extension and optionally passes configurations to it\n     */\n    link: {\n      type: [Boolean, Object],\n      default: false,\n    },\n\n    /**\n     * Placeholder text\n     */\n    placeholder: {\n      type: String,\n      default: '',\n    },\n\n    /**\n     * Disable Send Button\n     */\n    disableSend: {\n      type: Boolean,\n      default: false,\n    },\n\n    // Character limit props\n\n    /**\n     * Enable character Limit warning\n     */\n    hasCharacterLimit: {\n      type: Boolean,\n      default: true,\n    },\n\n    /**\n     * Max number of characters allowed\n     */\n    characterLimitCount: {\n      type: Number,\n      default: 1500,\n    },\n\n    /**\n     * Number after which warning for max limit appears\n     */\n    characterLimitWarning: {\n      type: Number,\n      default: 500,\n    },\n\n    // Emoji picker props\n\n    /**\n     * tab labels for emoji\n     */\n    tabSetLabels: {\n      type: Array,\n      default: () => [\n        'Most recently used',\n        'Smileys and people',\n        'Nature',\n        'Food',\n        'Activity',\n        'Travel',\n        'Objects',\n        'Symbols',\n        'Flags',\n      ],\n    },\n\n    skinSelectorButtonTooltipLabel: {\n      type: String,\n      default: 'Change default skin tone',\n    },\n\n    searchNoResultsLabel: {\n      type: String,\n      default: 'No results',\n    },\n\n    searchResultsLabel: {\n      type: String,\n      default: 'Search results',\n    },\n\n    searchPlaceholderLabel: {\n      type: String,\n      default: 'Search...',\n    },\n  },\n\n  emits: [\n    /**\n     * Fires when send button is clicked\n     *\n     * @event submit\n     * @type {String}\n     */\n    'submit',\n  ],\n\n  data () {\n    return {\n      skinTone: 'Default',\n      inputValue: this.value,\n      hasFocus: false,\n      emojiPickerOpened: false,\n    };\n  },\n\n  computed: {\n    inputLength () {\n      return this.inputValue.length;\n    },\n\n    displayCharacterLimitWarning () {\n      return this.hasCharacterLimit &&\n        (this.characterLimitCount - this.inputLength) <= this.characterLimitWarning;\n    },\n\n    isSendDisabled () {\n      return this.inputLength === 0 ||\n      this.disableSend ||\n      (this.hasCharacterLimit && this.inputLength > this.characterLimitCount);\n    },\n  },\n\n  methods: {\n    onSelectEmoji (emoji) {\n      if (!emoji) {\n        this.emojiPickerOpened = false;\n        return;\n      }\n\n      this.inputValue = this.inputValue + emoji.shortname;\n      this.emojiPickerOpened = false;\n    },\n\n    toggleEmojiPicker () {\n      this.emojiPickerOpened = !this.emojiPickerOpened;\n    },\n\n    onSend () {\n      if (this.isSendDisabled) {\n        return;\n      }\n      this.$emit('submit', this.inputValue);\n      this.inputValue = '';\n    },\n  },\n};\n</script>\n\n<style lang=\"less\">\n.dt-message-input--remaining-char {\n  font-size: 1.2rem;\n}\n\n.message-input-button__disabled {\n  background-color: unset;\n  color: var(--theme-sidebar-icon-color);\n  cursor: default;\n}\n</style>\n","<template>\n  <div class=\"d-h264\">\n    <dt-recipe-message-input\n      :input-aria-label=\"$attrs.inputAriaLabel\"\n      :auto-focus=\"$attrs.autoFocus\"\n      :editable=\"$attrs.editable\"\n      :input-class=\"inputClass\"\n      :link=\"$attrs.link\"\n      :output-format=\"$attrs.outputFormat\"\n      :placeholder=\"$attrs.placeholder\"\n      :value=\"$attrs.value\"\n      :disable-send=\"$attrs.disableSend\"\n      :has-character-limit=\"$attrs.hasCharacterLimit\"\n      :character-limit-count=\"$attrs.characterLimitCount\"\n      :character-limit-warning=\"$attrs.characterLimitWarning\"\n      @submit=\"$attrs.onSubmit\"\n      @focus=\"$attrs.onFocus\"\n      @blur=\"$attrs.onBlur\"\n      @input=\"$attrs.onInput\"\n    >\n      <template\n        #footerLeft\n      >\n        <div class=\"message-input-recipe-subtitle d-fc-black-500\">\n          <b>Dwight</b> is typing...\n        </div>\n      </template>\n      <template\n        #footerRight\n      >\n        <div class=\"message-input-recipe-subtitle d-fc-black-500\">\n          <b>Shift</b> + <b>Return</b> to add a new line\n        </div>\n      </template>\n    </dt-recipe-message-input>\n  </div>\n</template>\n\n<script>\nimport DtRecipeMessageInput from './message_input.vue';\n\nexport default {\n  name: 'DtRecipeMessageInputDefault',\n  components: { DtRecipeMessageInput },\n};\n</script>\n\n<style>\n.message-input-recipe-subtitle {\n  font-size: 1rem;\n}\n</style>\n"],"names":["_sfc_main","DtButton","DtEmojiPicker","DtIcon","DtRichTextEditor","autoFocus","RICH_TEXT_EDITOR_AUTOFOCUS_TYPES","outputFormat","RICH_TEXT_EDITOR_OUTPUT_FORMATS","emoji","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_5","_hoisted_7","_createElementBlock","_createCommentVNode","_createElementVNode","_normalizeClass","$data","_createVNode","_component_dt_rich_text_editor","_mergeProps","$event","$props","_ctx","_renderSlot","_component_dt_button","_component_dt_icon","$options","_openBlock","_hoisted_4","_component_dt_emoji_picker","_cache","_hoisted_6","_toDisplayString","DtRecipeMessageInput","_component_dt_recipe_message_input"],"mappings":"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"}