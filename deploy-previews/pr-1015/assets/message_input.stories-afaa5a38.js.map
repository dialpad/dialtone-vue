{"version":3,"file":"message_input.stories-afaa5a38.js","sources":["../../recipes/conversation_view/message_input/message_input.vue","../../recipes/conversation_view/message_input/message_input_default.story.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- TODO: A purpose-built place to display validation errors using DtBanner -->\n    <div\n      class=\"d-d-flex d-fd-column d-bar8 d-baw1 d-ba d-c-text\"\n      :class=\"{ 'd-bc-black-500 d-bs-sm': hasFocus, 'd-bc-black-300': !hasFocus }\"\n    >\n      <!-- Some wrapper to restrict the height and show the scrollbar -->\n      <div class=\"d-of-auto d-mx16 d-mt8 d-mb4 d-hmx40p\">\n        <dt-rich-text-editor\n          v-model=\"inputValue\"\n          :editable=\"editable\"\n          :input-aria-label=\"inputAriaLabel\"\n          :input-class=\"inputClass\"\n          :output-format=\"outputFormat\"\n          :auto-focus=\"autoFocus\"\n          :link=\"link\"\n          :placeholder=\"placeholder\"\n          v-bind=\"$attrs\"\n        />\n      </div>\n      <!-- @slot Slot for attachment carousel -->\n      <slot name=\"middle\" />\n      <!-- Section for the bottom UI -->\n      <section class=\"d-d-flex d-jc-space-between d-mx8 d-my4\">\n        <!-- Left content -->\n        <div class=\"d-d-flex\">\n          <dt-button\n            size=\"sm\"\n            circle\n            importance=\"clear\"\n          >\n            <template #icon>\n              <dt-icon\n                name=\"image\"\n                size=\"300\"\n              />\n            </template>\n          </dt-button>\n          <dt-popover\n            :open=\"emojiPickerOpened\"\n            @opened=\"(open) => { emojiPickerOpened = open }\"\n          >\n            <template #anchor>\n              <dt-button\n                size=\"sm\"\n                circle\n                importance=\"clear\"\n                @click=\"toggleEmojiPicker\"\n              >\n                <template #icon>\n                  <dt-icon\n                    name=\"satisfied\"\n                    size=\"300\"\n                  />\n                </template>\n              </dt-button>\n            </template>\n            <template #content>\n              <dt-emoji-picker\n                :tab-set-labels=\"[\n                  &quot;Most recently used&quot;,\n                  &quot;Smileys and people&quot;,\n                  &quot;Nature&quot;,\n                  &quot;Food&quot;,\n                  &quot;Activity&quot;,\n                  &quot;Travel&quot;,\n                  &quot;Objects&quot;,\n                  &quot;Symbols&quot;,\n                  &quot;Flags&quot;,\n                ]\"\n                skin-selector-button-tooltip-label=\"Change default skin tone\"\n                search-no-results-label=\"No results\"\n                search-results-label=\"Search results\"\n                search-placeholder-label=\"Search...\"\n                @skin-tone=\"() => {}\"\n                @selected-emoji=\"onSelectEmoji\"\n                @close=\"() => {}\"\n              />\n            </template>\n          </dt-popover>\n        </div>\n        <!-- Right content -->\n        <div class=\"d-d-flex\">\n          <!-- Optionally displayed remaining character counter -->\n          <p class=\"d-fc-error d-mr16 d-as-center dt-message-input--remaining-char\">\n            <!-- TODO: Replace with char remaining logic -->\n            {{ 500 }}\n          </p>\n          <!-- Right positioned UI - send button -->\n          <dt-button\n            size=\"sm\"\n            circle\n            importance=\"primary\"\n            :disabled=\"disableSend\"\n            @click=\"onSend\"\n          >\n            <template #icon>\n              <dt-icon\n                name=\"send\"\n                size=\"300\"\n              />\n            </template>\n          </dt-button>\n        </div>\n      </section>\n    </div>\n    <section class=\"d-d-flex d- d-jc-space-between d-h24\">\n      <div>\n        <!-- @slot Slot for helper text. Who is typing can go here -->\n        <slot name=\"footerLeft\" />\n      </div>\n      <div>\n        <!-- @slot helper text for the input. Shift + enter for new line -->\n        <slot name=\"footerRight\" />\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport {\n  DtRichTextEditor,\n  RICH_TEXT_EDITOR_OUTPUT_FORMATS,\n  RICH_TEXT_EDITOR_AUTOFOCUS_TYPES,\n} from '@/components/rich_text_editor';\nimport { DtButton } from '@/components/button';\nimport { DtIcon } from '@/components/icon';\nimport { DtEmojiPicker } from '@/components/emoji_picker';\nimport { DtPopover } from '@/components/popover';\n\nexport default {\n  name: 'DtRecipeMessageInput',\n\n  components: {\n    DtButton,\n    DtEmojiPicker,\n    DtIcon,\n    DtPopover,\n    DtRichTextEditor,\n  },\n\n  mixins: [],\n\n  inheritAttrs: false,\n\n  props: {\n    /**\n     * Value of the input. The object format should match TipTap's JSON\n     * document structure: https://tiptap.dev/guide/output#option-1-json\n     */\n    value: {\n      type: [Object, String],\n      default: '',\n    },\n\n    /**\n     * Whether the input is editable\n     */\n    editable: {\n      type: Boolean,\n      default: true,\n    },\n\n    /**\n     * Descriptive label for the input element\n     */\n    inputAriaLabel: {\n      type: String,\n      required: true,\n    },\n\n    /**\n     * Additional class name for the input element. Only accepts a String value\n     * because this is passed to the editor via options. For multiple classes,\n     * join them into one string, e.g. \"d-p8 d-hmx96\"\n     */\n    inputClass: {\n      type: String,\n      default: '',\n    },\n\n    /**\n     * Whether the input should receive focus after the component has been\n     * mounted. Either one of `start`, `end`, `all` or a Boolean or a Number.\n     * - `start`  Sets the focus to the beginning of the input\n     * - `end`    Sets the focus to the end of the input\n     * - `all`    Selects the whole contents of the input\n     * - `Number` Sets the focus to a specific position in the input\n     * - `true`   Defaults to `start`\n     * - `false`  Disables autofocus\n     * @values true, false, start, end, all, number\n     */\n    autoFocus: {\n      type: [Boolean, String, Number],\n      default: false,\n      validator (autoFocus) {\n        if (typeof autoFocus === 'string') {\n          return RICH_TEXT_EDITOR_AUTOFOCUS_TYPES.includes(autoFocus);\n        }\n        return true;\n      },\n    },\n\n    /**\n     * The output format that the editor uses when emitting the \"@input\" event.\n     * One of `text`, `json`, `html`. See https://tiptap.dev/guide/output for\n     * examples.\n     * @values text, json, html\n     */\n    outputFormat: {\n      type: String,\n      default: 'text',\n      validator (outputFormat) {\n        return RICH_TEXT_EDITOR_OUTPUT_FORMATS.includes(outputFormat);\n      },\n    },\n\n    /**\n     * Enables the Link extension and optionally passes configurations to it\n     */\n    link: {\n      type: [Boolean, Object],\n      default: false,\n    },\n\n    /**\n     * Placeholder text\n     */\n    placeholder: {\n      type: String,\n      default: '',\n    },\n\n    /**\n     * Disable Send Button\n     */\n    disableSend: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  emits: [\n    /**\n     * Fires when send button is clicked\n     *\n     * @event submit\n     * @type {String}\n     */\n    'submit',\n  ],\n\n  data () {\n    return {\n      inputValue: this.value,\n      hasFocus: false,\n      emojiPickerOpened: false,\n    };\n  },\n\n  methods: {\n    onSelectEmoji (emoji) {\n      this.inputValue = this.inputValue + emoji.shortname;\n      this.emojiPickerOpened = false;\n    },\n\n    toggleEmojiPicker () {\n      this.emojiPickerOpened = !this.emojiPickerOpened;\n    },\n\n    onSend () {\n      this.$emit('submit', this.inputValue);\n      this.inputValue = '';\n    },\n  },\n};\n</script>\n\n<style lang=\"less\">\n.dt-message-input--remaining-char {\n  font-size: 1.2rem;\n}\n</style>\n","<template>\n  <div class=\"d-h264\">\n    <dt-recipe-message-input\n      :input-aria-label=\"$attrs.inputAriaLabel\"\n      :auto-focus=\"$attrs.autoFocus\"\n      :editable=\"$attrs.editable\"\n      :input-class=\"inputClass\"\n      :link=\"$attrs.link\"\n      :output-format=\"$attrs.outputFormat\"\n      :placeholder=\"$attrs.placeholder\"\n      :value=\"$attrs.value\"\n      :disable-send=\"$attrs.disableSend\"\n      @submit=\"$attrs.onSubmit\"\n      @focus=\"$attrs.onFocus\"\n      @blur=\"$attrs.onBlur\"\n      @input=\"$attrs.onInput\"\n    >\n      <template\n        #footerLeft\n      >\n        <div class=\"message-input-recipe-subtitle d-fc-black-500\">\n          <b>Dwight</b> is typing...\n        </div>\n      </template>\n      <template\n        #footerRight\n      >\n        <div class=\"message-input-recipe-subtitle d-fc-black-500\">\n          <b>Shift</b> + <b>Return</b> to add a new line\n        </div>\n      </template>\n    </dt-recipe-message-input>\n  </div>\n</template>\n\n<script>\nimport DtRecipeMessageInput from './message_input.vue';\n\nexport default {\n  name: 'DtRecipeMessageInputDefault',\n  components: { DtRecipeMessageInput },\n};\n</script>\n\n<style>\n.message-input-recipe-subtitle {\n  font-size: 1rem;\n}\n</style>\n"],"names":["_sfc_main","DtButton","DtEmojiPicker","DtIcon","DtPopover","DtRichTextEditor","autoFocus","RICH_TEXT_EDITOR_AUTOFOCUS_TYPES","outputFormat","RICH_TEXT_EDITOR_OUTPUT_FORMATS","emoji","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createElementVNode","_createCommentVNode","_createTextVNode","_hoisted_6","_createElementBlock","_normalizeClass","$data","_createVNode","_component_dt_rich_text_editor","_mergeProps","$event","$props","_ctx","_renderSlot","_component_dt_button","_component_dt_icon","_component_dt_popover","_cache","open","$options","_component_dt_emoji_picker","_hoisted_5","DtRecipeMessageInput","_openBlock","_component_dt_recipe_message_input"],"mappings":"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"}