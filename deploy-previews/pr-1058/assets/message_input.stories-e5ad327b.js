import{a as m}from"./chunk-OPEUWD42-a3b45fd8.js";import{c as O}from"./storybook_utils-7153c87a.js";import{D as E,R as U,a as W}from"./rich_text_editor-a39e498f.js";import{D as z}from"./button-290b3d5b.js";import{D as K}from"./icon-370c3176.js";import{a as d,f as k,b as x,w as r,n as y,k as u,g as l,d as s,p as H,l as j,m as L,F as $,o as b,u as h}from"./vue.esm-bundler-238c0022.js";import{D as q}from"./DtEmojiPicker-da75568f.js";import{D as J}from"./popover-65a1ea55.js";import{D as X}from"./input-05ee51fe.js";import{c as Y,N as V}from"./notice-1a6acb58.js";import{D as G}from"./tooltip-dd83ba35.js";import{_ as w}from"./_plugin-vue_export-helper-c27b6911.js";const C={name:"DtRecipeMessageInput",components:{DtButton:z,DtEmojiPicker:q,DtIcon:K,DtInput:X,DtNotice:Y,DtPopover:J,DtRichTextEditor:E,DtTooltip:G},mixins:[],inheritAttrs:!1,props:{modelValue:{type:[Object,String],default:""},editable:{type:Boolean,default:!0},inputAriaLabel:{type:String,required:!0,default:""},inputClass:{type:String,default:""},autoFocus:{type:[Boolean,String,Number],default:!1,validator(e){return typeof e=="string"?U.includes(e):!0}},outputFormat:{type:String,default:"text",validator(e){return W.includes(e)}},link:{type:[Boolean,Object],default:!1},placeholder:{type:String,default:""},disableSend:{type:Boolean,default:!1},hasCharacterLimit:{type:Boolean,default:!0},characterLimitCount:{type:Number,default:1500},characterLimitWarning:{type:Number,default:500},showNotice:{type:Boolean,default:!1},noticeMessage:{type:String,default:""},noticeKind:{type:String,default:"error",validate(e){return V.includes(e)}},emojiTabSetLabels:{type:Array,default:()=>["Most recently used","Smileys and people","Nature","Food","Activity","Travel","Objects","Symbols","Flags"]},emojiSkinSelectorButtonTooltipLabel:{type:String,default:"Change default skin tone"},emojiSearchNoResultsLabel:{type:String,default:"No results"},emojiSearchResultsLabel:{type:String,default:"Search results"},emojiSearchPlaceholderLabel:{type:String,default:"Search..."},emojiTooltipMessage:{type:String,default:"Emoji"},emojiButtonAriaLabel:{type:String,default:"emoji button"},imageButtonAriaLabel:{type:String,default:"image button"},imageTooltipLabel:{type:String,default:"Attach Image"},sendButtonAriaLabel:{type:String,default:"send button"},sendTooltipLabel:{type:String,default:"Send"}},emits:["submit","select-media","add-media","notice-close"],data(){return{skinTone:"Default",inputValue:this.modelValue,hasFocus:!1,imagePickerFocus:!1,emojiPickerFocus:!1,sendButtonFocus:!1,emojiPickerOpened:!1}},computed:{inputLength(){return this.inputValue.length},displayCharacterLimitWarning(){return this.hasCharacterLimit&&this.characterLimitCount-this.inputLength<=this.characterLimitWarning},isSendDisabled(){return this.inputLength===0||this.disableSend||this.hasCharacterLimit&&this.inputLength>this.characterLimitCount},computedCloseButtonProps(){return{ariaLabel:"Close"}},noticeClasses(){return["d-ps-relative","d-t8","d-bbr0","d-pt4","d-pb8","d-pr12","d-pl16","d-bs-none","d-fs-100","d-wmx-unset"]},emojiPickerHovered(){return this.emojiPickerFocus||this.emojiPickerOpened}},watch:{modelValue(e){this.inputValue=e}},methods:{onDrag(e){e.stopPropagation(),e.preventDefault()},onDrop(e){e.stopPropagation(),e.preventDefault();const t=e.dataTransfer,g=Array.from(t.files).map(a=>a.name);this.$emit("add-media",g)},onSelectEmoji(e){if(!e){this.emojiPickerOpened=!1;return}this.inputValue=this.inputValue+e.shortname,this.emojiPickerOpened=!1},onSelectImage(){this.$refs.messageInputImageUpload.$refs.input.click()},onImageUpload(e){this.$emit("select-media",e)},toggleEmojiPicker(){this.emojiPickerOpened=!this.emojiPickerOpened},onSend(){this.isSendDisabled||this.$emit("submit",this.inputValue)},noticeClose(){this.$emit("notice-close",!0)}}},Q={class:"d-ps-relative d-bar8 d-bgc-white"},Z={class:"d-of-auto d-mx16 d-mt8 d-mb4 d-hmx40p"},ee={class:"d-d-flex d-jc-space-between d-mx8 d-my4"},te={class:"d-d-flex"},ae={class:"d-d-flex"},ne={key:0,class:"d-fc-error d-mr16 d-as-center dt-message-input--remaining-char"},oe={class:"d-d-flex d-jc-space-between d-h24 d-ai-center"};function ie(e,t,o,g,a,i){const c=d("dt-icon"),p=d("dt-notice"),M=d("dt-rich-text-editor"),v=d("dt-button"),_=d("dt-input"),S=d("dt-tooltip"),A=d("dt-emoji-picker"),R=d("dt-popover");return b(),k($,null,[o.showNotice?(b(),x(p,{key:0,class:y(i.noticeClasses),kind:o.noticeKind,"close-button-props":i.computedCloseButtonProps,onClose:i.noticeClose},{icon:r(()=>[s(c,{size:"300",name:"alert-circle"})]),default:r(()=>[h(L(o.noticeMessage)+" ",1)]),_:1},8,["class","kind","close-button-props","onClose"])):u("v-if",!0),l("div",Q,[l("div",{role:"presentation",class:y(["d-d-flex d-fd-column d-bar8 d-baw1 d-ba d-c-text",{"d-bc-black-500 d-bs-sm":a.hasFocus,"d-bc-default":!a.hasFocus}]),onClick:t[17]||(t[17]=n=>e.$refs.richTextEditor.focusEditor()),onDragEnter:t[18]||(t[18]=(...n)=>i.onDrag&&i.onDrag(...n)),onDragOver:t[19]||(t[19]=(...n)=>i.onDrag&&i.onDrag(...n)),onDrop:t[20]||(t[20]=(...n)=>i.onDrop&&i.onDrop(...n)),onFocusin:t[21]||(t[21]=n=>a.hasFocus=!0),onFocusout:t[22]||(t[22]=n=>a.hasFocus=!1)},[u(" Some wrapper to restrict the height and show the scrollbar "),l("div",Z,[s(M,H({ref:"richTextEditor",modelValue:a.inputValue,"onUpdate:modelValue":t[0]||(t[0]=n=>a.inputValue=n),editable:o.editable,"input-aria-label":o.inputAriaLabel,"input-class":o.inputClass,"output-format":o.outputFormat,"auto-focus":o.autoFocus,link:o.link,placeholder:o.placeholder},e.$attrs,{onFocus:t[1]||(t[1]=n=>a.hasFocus=!0),onBlur:t[2]||(t[2]=n=>a.hasFocus=!1)}),null,16,["modelValue","editable","input-aria-label","input-class","output-format","auto-focus","link","placeholder"])]),u(" @slot Slot for attachment carousel "),j(e.$slots,"middle"),u(" Section for the bottom UI "),l("section",ee,[u(" Left content "),l("div",te,[s(S,{placement:"top-start",message:o.imageTooltipLabel,offset:[-4,-4]},{anchor:r(()=>[s(v,{size:"sm",circle:"",kind:a.imagePickerFocus?"default":"muted",importance:"clear","aria-label":o.imageButtonAriaLabel,onClick:i.onSelectImage,onInput:i.onImageUpload,onMouseenter:t[3]||(t[3]=n=>a.imagePickerFocus=!0),onMouseleave:t[4]||(t[4]=n=>a.imagePickerFocus=!1),onFocusin:t[5]||(t[5]=n=>a.imagePickerFocus=!0),onFocusout:t[6]||(t[6]=n=>a.imagePickerFocus=!1)},{icon:r(()=>[s(c,{name:"image",size:"300"})]),_:1},8,["kind","aria-label","onClick","onInput"]),s(_,{ref:"messageInputImageUpload",type:"file",class:"d-ps-absolute",multiple:"",hidden:""},null,512)]),_:1},8,["message"]),s(R,{open:a.emojiPickerOpened,"initial-focus-element":"#searchInput",padding:"none",onOpened:t[12]||(t[12]=n=>{a.emojiPickerOpened=n})},{anchor:r(()=>[s(S,{message:o.emojiTooltipMessage,offset:[0,-4]},{anchor:r(()=>[s(v,{size:"sm",circle:"",kind:i.emojiPickerHovered?"default":"muted",importance:"clear","aria-label":o.emojiButtonAriaLabel,offset:[0,0],onClick:i.toggleEmojiPicker,onMouseenter:t[7]||(t[7]=n=>a.emojiPickerFocus=!0),onMouseleave:t[8]||(t[8]=n=>a.emojiPickerFocus=!1),onFocusin:t[9]||(t[9]=n=>a.emojiPickerFocus=!0),onFocusout:t[10]||(t[10]=n=>a.emojiPickerFocus=!1)},{icon:r(()=>[s(c,{name:i.emojiPickerHovered?"very-satisfied":"satisfied",size:"300"},null,8,["name"])]),_:1},8,["kind","aria-label","onClick"])]),_:1},8,["message"])]),content:r(()=>[s(A,{"tab-set-labels":o.emojiTabSetLabels,"skin-selector-button-tooltip-label":o.emojiSkinSelectorButtonTooltipLabel,"search-no-results-label":o.emojiSearchNoResultsLabel,"search-results-label":o.emojiSearchResultsLabel,"search-placeholder-label":o.emojiSearchPlaceholderLabel,"skin-tone":a.skinTone,onSkinTone:t[11]||(t[11]=n=>a.skinTone=n),onSelectedEmoji:i.onSelectEmoji},null,8,["tab-set-labels","skin-selector-button-tooltip-label","search-no-results-label","search-results-label","search-placeholder-label","skin-tone","onSelectedEmoji"])]),_:1},8,["open"])]),u(" Right content "),l("div",ae,[u(" Optionally displayed remaining character counter "),i.displayCharacterLimitWarning?(b(),k("p",ne,L(o.characterLimitCount-i.inputLength),1)):u("v-if",!0),s(S,{placement:"top-end",message:o.sendTooltipLabel,show:!i.isSendDisabled&&a.sendButtonFocus,offset:[6,-4]},{anchor:r(()=>[u(" Right positioned UI - send button "),s(v,{size:"sm",kind:i.isSendDisabled?"muted":"default",circle:"",importance:"primary",class:y({"message-input-button__disabled d-fc-muted":i.isSendDisabled}),"aria-label":o.sendButtonAriaLabel,"aria-disabled":i.isSendDisabled,onClick:i.onSend,onMouseenter:t[13]||(t[13]=n=>a.sendButtonFocus=!0),onMouseleave:t[14]||(t[14]=n=>a.sendButtonFocus=!1),onFocusin:t[15]||(t[15]=n=>a.sendButtonFocus=!0),onFocusout:t[16]||(t[16]=n=>a.sendButtonFocus=!1)},{icon:r(()=>[s(c,{name:"send",size:"300"})]),_:1},8,["kind","class","aria-label","aria-disabled","onClick"])]),_:1},8,["message","show"])])])],34),l("section",oe,[l("div",null,[u(" @slot Slot for helper text. Who is typing can go here "),j(e.$slots,"footerLeft")]),l("div",null,[u(" @slot helper text for the input. Shift + enter for new line "),j(e.$slots,"footerRight")])])])],64)}const B=w(C,[["render",ie],["__file","/home/runner/work/dialtone-vue/dialtone-vue/recipes/conversation_view/message_input/message_input.vue"]]);C.__docgenInfo={displayName:"DtRecipeMessageInput",exportName:"default",description:"",tags:{},props:[{name:"modelValue",description:`Value of the input. The object format should match TipTap's JSON
document structure: https://tiptap.dev/guide/output#option-1-json`,type:{name:"object|string"},defaultValue:{func:!1,value:"''"}},{name:"editable",description:"Whether the input is editable",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"inputAriaLabel",description:"Descriptive label for the input element",type:{name:"string"},required:!0,defaultValue:{func:!1,value:"''"}},{name:"inputClass",description:`Additional class name for the input element. Only accepts a String value
because this is passed to the editor via options. For multiple classes,
join them into one string, e.g. "d-p8 d-hmx96"`,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"autoFocus",description:"Whether the input should receive focus after the component has been\nmounted. Either one of `start`, `end`, `all` or a Boolean or a Number.\n- `start`  Sets the focus to the beginning of the input\n- `end`    Sets the focus to the end of the input\n- `all`    Selects the whole contents of the input\n- `Number` Sets the focus to a specific position in the input\n- `true`   Defaults to `start`\n- `false`  Disables autofocus",tags:{},values:["true","false","start","end","all","number"],type:{name:"boolean|string|number"},defaultValue:{func:!1,value:"false"}},{name:"outputFormat",description:'The output format that the editor uses when emitting the "@input" event.\nOne of `text`, `json`, `html`. See https://tiptap.dev/guide/output for\nexamples.',tags:{},values:["text","json","html"],type:{name:"string"},defaultValue:{func:!1,value:"'text'"}},{name:"link",description:"Enables the Link extension and optionally passes configurations to it",type:{name:"boolean|object"},defaultValue:{func:!1,value:"false"}},{name:"placeholder",description:"Placeholder text",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"disableSend",description:"Disable Send Button",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"hasCharacterLimit",description:"Enable character Limit warning",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"characterLimitCount",description:"Max number of characters allowed",type:{name:"number"},defaultValue:{func:!1,value:"1500"}},{name:"characterLimitWarning",description:"Number after which warning for max limit appears",type:{name:"number"},defaultValue:{func:!1,value:"500"}},{name:"showNotice",description:`Show error notice
This should be turned to false after notice-close event is fired.`,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"noticeMessage",description:"message in the notice",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"noticeKind",description:"kind of notice to manage color",tags:{},values:["base","error","info","success","warning"],type:{name:"string"},defaultValue:{func:!1,value:"'error'"}},{name:"emojiTabSetLabels",description:"tab labels for emoji",type:{name:"array"},defaultValue:{func:!1,value:`[
  'Most recently used',
  'Smileys and people',
  'Nature',
  'Food',
  'Activity',
  'Travel',
  'Objects',
  'Symbols',
  'Flags',
]`}},{name:"emojiSkinSelectorButtonTooltipLabel",type:{name:"string"},defaultValue:{func:!1,value:"'Change default skin tone'"}},{name:"emojiSearchNoResultsLabel",type:{name:"string"},defaultValue:{func:!1,value:"'No results'"}},{name:"emojiSearchResultsLabel",type:{name:"string"},defaultValue:{func:!1,value:"'Search results'"}},{name:"emojiSearchPlaceholderLabel",type:{name:"string"},defaultValue:{func:!1,value:"'Search...'"}},{name:"emojiTooltipMessage",description:"Emoji button tooltip label",type:{name:"string"},defaultValue:{func:!1,value:"'Emoji'"}},{name:"emojiButtonAriaLabel",description:"Emoji button aria label",type:{name:"string"},defaultValue:{func:!1,value:"'emoji button'"}},{name:"imageButtonAriaLabel",type:{name:"string"},defaultValue:{func:!1,value:"'image button'"}},{name:"imageTooltipLabel",description:"Image button tooltip label",type:{name:"string"},defaultValue:{func:!1,value:"'Attach Image'"}},{name:"sendButtonAriaLabel",type:{name:"string"},defaultValue:{func:!1,value:"'send button'"}},{name:"sendTooltipLabel",description:"Send button tooltip label",type:{name:"string"},defaultValue:{func:!1,value:"'Send'"}}],events:[{name:"submit",description:"Fires when send button is clicked",type:{names:["String"]}},{name:"select-media",description:"Fires when media is selected from image button",type:{names:["Array"]}},{name:"add-media",description:"Fires when media is dropped into the message input",type:{names:["Array"]}},{name:"notice-close",description:`Fires when notice is closed by user.
Listen to this event to toggle showNotice on usage.`,type:{names:["Boolean"]}}],slots:[{name:"middle",description:"Slot for attachment carousel"},{name:"footerLeft",description:"Slot for helper text. Who is typing can go here"},{name:"footerRight",description:"helper text for the input. Shift + enter for new line"}],sourceFiles:["/home/runner/work/dialtone-vue/dialtone-vue/recipes/conversation_view/message_input/message_input.vue"]};const N={name:"DtRecipeMessageInputDefault",components:{DtRecipeMessageInput:B}},se={class:"d-h264"},le=l("div",{class:"d-body-small d-fc-muted"},[l("b",null,"Dwight"),h(" is typing... ")],-1),re=l("div",{class:"d-body-small d-fc-tertiary"},[l("b",null,"Shift"),h(" + "),l("b",null,"Return"),h(" to add a new line ")],-1);function ue(e,t,o,g,a,i){const c=d("dt-recipe-message-input");return b(),k("div",se,[s(c,{"show-notice":e.$attrs.showNotice,"onUpdate:showNotice":t[0]||(t[0]=p=>e.$attrs.showNotice=p),modelValue:e.$attrs.modelValue,"onUpdate:modelValue":t[1]||(t[1]=p=>e.$attrs.modelValue=p),"input-aria-label":e.$attrs.inputAriaLabel,"auto-focus":e.$attrs.autoFocus,editable:e.$attrs.editable,"input-class":e.$attrs.inputClass,link:e.$attrs.link,"output-format":e.$attrs.outputFormat,placeholder:e.$attrs.placeholder,"disable-send":e.$attrs.disableSend,"has-character-limit":e.$attrs.hasCharacterLimit,"character-limit-count":e.$attrs.characterLimitCount,"character-limit-warning":e.$attrs.characterLimitWarning,"notice-kind":e.$attrs.noticeKind,"notice-message":e.$attrs.noticeMessage,"emoji-tab-set-labels":e.$attrs.emojiTabSetLabels,"emoji-skin-selector-button-tooltip-label":e.$attrs.emojiSkinSelectorButtonTooltipLabel,"emoji-search-no-results-label":e.$attrs.emojiSearchNoResultsLabel,"emoji-search-results-label":e.$attrs.emojiSearchResultsLabel,"emoji-search-placeholder-label":e.$attrs.emojiSearchPlaceholderLabel,"send-button-aria-label":e.$attrs.sendButtonAriaLabel,"emoji-button-aria-label":e.$attrs.emojiButtonAriaLabel,"image-button-aria-label":e.$attrs.imageButtonAriaLabel,onSubmit:e.$attrs.onSubmit,onFocus:e.$attrs.onFocus,onBlur:e.$attrs.onBlur,onInput:e.$attrs.onInput,onSelectMedia:e.$attrs.onSelectMedia,onAddMedia:e.$attrs.onAddMedia,onNoticeClose:e.$attrs.onNoticeClose},{footerLeft:r(()=>[le]),footerRight:r(()=>[re]),_:1},8,["show-notice","modelValue","input-aria-label","auto-focus","editable","input-class","link","output-format","placeholder","disable-send","has-character-limit","character-limit-count","character-limit-warning","notice-kind","notice-message","emoji-tab-set-labels","emoji-skin-selector-button-tooltip-label","emoji-search-no-results-label","emoji-search-results-label","emoji-search-placeholder-label","send-button-aria-label","emoji-button-aria-label","image-button-aria-label","onSubmit","onFocus","onBlur","onInput","onSelectMedia","onAddMedia","onNoticeClose"])])}const de=w(N,[["render",ue],["__file","/home/runner/work/dialtone-vue/dialtone-vue/recipes/conversation_view/message_input/message_input_default.story.vue"]]);N.__docgenInfo={displayName:"DtRecipeMessageInputDefault",exportName:"default",description:"",tags:{},sourceFiles:["/home/runner/work/dialtone-vue/dialtone-vue/recipes/conversation_view/message_input/message_input_default.story.vue"]};const P={noticeKind:{options:V,control:{type:"select"}},onSubmit:{table:{disable:!0}},onFocus:{table:{disable:!0}},onBlur:{table:{disable:!0}},onInput:{table:{disable:!0}},onAddMedia:{table:{disable:!0}},onNoticeClose:{table:{disable:!0}},onSelectMedia:{table:{disable:!0}}},I={modelValue:"Always the Padawan, never the Jedi.",placeholder:"New message",inputAriaLabel:"Input text field",noticeMessage:"Files must be less than 32 MB to be sent as Dialpad messages.",onSubmit:m("submit"),onFocus:m("focus"),onBlur:m("blur"),onInput:m("input"),onSelectMedia:m("select-media"),onAddMedia:m("add-media"),onNoticeClose:m("notice-close")},me={title:"Recipes/Conversation View/Message Input",component:B,args:I,argTypes:P,excludeStories:/.*Data$/},ce=e=>O(e,de),f={render:ce,args:{}};var D,F,T;f.parameters={...f.parameters,docs:{...(D=f.parameters)==null?void 0:D.docs,source:{originalSource:`{
  render: DefaultTemplate,
  args: {}
}`,...(T=(F=f.parameters)==null?void 0:F.docs)==null?void 0:T.source}}};const pe=["argTypesData","argsData","Default"],Te=Object.freeze(Object.defineProperty({__proto__:null,Default:f,__namedExportsOrder:pe,argTypesData:P,argsData:I,default:me},Symbol.toStringTag,{value:"Module"}));export{Te as D,f as a};
//# sourceMappingURL=message_input.stories-e5ad327b.js.map
