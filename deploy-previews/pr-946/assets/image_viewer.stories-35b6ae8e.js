import{n,E as o,c as w}from"./_plugin-vue2_normalizer-bbedbd26.js";import{M as D}from"./modal-f96ddab9.js";import{D as I}from"./icon-e129d5a5.js";import{D as T}from"./button-b621edab.js";import{P as V}from"./index.esm-018778a2.js";import{a as S}from"./chunk-OPEUWD42-0dc0813d.js";const k={name:"DtImageViewer",components:{Portal:V,DtButton:T,DtIcon:I},mixins:[D],props:{open:{type:Boolean,default:null},imageSrc:{type:String,required:!0},imageAlt:{type:String,required:!0},imageButtonClass:{type:String,required:!1,default:""},ariaLabel:{type:String,required:!0},closeAriaLabel:{type:String,required:!0}},emits:["opened","update:open"],data(){return{showCloseButton:!0,isOpen:!1}},computed:{modalListeners(){return{...this.$listeners,click:t=>{t.target===t.currentTarget&&this.close()},keydown:t=>{switch(t.code){case o.esc:case o.escape:this.close();break;case o.tab:this.trapFocus(t);break}}}}},watch:{isOpen:{immediate:!0,handler(t){var e;t?this.previousActiveElement=document.activeElement:((e=this.previousActiveElement)==null||e.focus(),this.previousActiveElement=null)}},open:{handler:function(t){t!==null&&(this.isOpen=t)},immediate:!0}},methods:{openModal(){this.open===null&&(this.isOpen=!0,this.showCloseButton=!0,this.$emit("opened",!0),setTimeout(()=>{this.focusAfterOpen()}))},close(){this.isOpen=!1,this.$emit("opened",!1),this.open!==null&&this.$emit("update:open",!1)},focusAfterOpen(){var t;(t=this.$refs.closeImage)==null||t.$el.focus()},trapFocus(t){this.isOpen&&this.focusTrappedTabPress(t)}}};var y=function(){var e=this,a=e._self._c;return a("div",[a("dt-button",{staticClass:"d-p0 d-c-zoom-in",attrs:{"data-qa":"dt-image-viewer-preview","aria-label":e.ariaLabel,importance:"clear"},on:{click:e.openModal}},[a("img",{class:e.imageButtonClass,attrs:{src:e.imageSrc,alt:e.imageAlt}})]),e.isOpen?a("portal",[a("div",e._g({staticClass:"d-modal",attrs:{"aria-hidden":e.isOpen?"false":"true","data-qa":"dt-modal"},on:{mouseover:function(i){e.showCloseButton=!0},mouseleave:function(i){e.showCloseButton=!1},focusin:function(i){e.showCloseButton=!0},focusout:function(i){e.showCloseButton=!1}}},e.modalListeners),[a("div",{staticClass:"d-p0 d-bar0 d-wmx80p d-hmx80p",attrs:{"data-qa":"dt-image-viewer-full",role:"dialog","aria-modal":"true"}},[a("img",{staticClass:"d-wmx100p d-hmx100p",attrs:{src:e.imageSrc,alt:e.imageAlt}})]),a("transition",{attrs:{name:"fade"}},[e.showCloseButton?a("dt-button",{ref:"closeImage",staticClass:"d-modal__close",attrs:{"data-qa":"dt-image-viewer-close-btn",circle:"",size:"lg",importance:"clear",kind:"inverted","aria-label":e.closeAriaLabel},on:{click:e.close},scopedSlots:e._u([{key:"icon",fn:function(){return[a("dt-icon",{attrs:{name:"close",size:"400"}})]},proxy:!0}],null,!1,1709155279)}):e._e()],1)],1)]):e._e()],1)},L=[];y._withStripped=!0;var l=n(k,y,L,!1,null,null,null,null);l.options.__file="/home/runner/work/dialtone-vue/dialtone-vue/components/image_viewer/image_viewer.vue";const m=l.exports;l.exports.__docgenInfo={displayName:"DtImageViewer",exportName:"default",description:"",tags:{},props:[{name:"open",description:`Controls whether the image modal is shown. Leaving this null will have the image modal
trigger on click by default.
If you set this value, the default trigger behavior will be disabled and you can control it as you need.
Supports .sync modifier`,tags:{},values:["null","true","false"],type:{name:"boolean"},defaultValue:{func:!1,value:"null"}},{name:"imageSrc",description:"URL of the image to be shown",type:{name:"string"},required:!0},{name:"imageAlt",description:"Alt text of image",type:{name:"string"},required:!0},{name:"imageButtonClass",description:"Image Class",type:{name:"string"},required:!1,defaultValue:{func:!1,value:"''"}},{name:"ariaLabel",description:"Aria label",type:{name:"string"},required:!0},{name:"closeAriaLabel",description:"Aria label for close button",type:{name:"string"},required:!0}],events:[{name:"opened",description:"Emitted when popover is shown or hidden",type:{names:["Boolean"]}},{name:"update:open",description:"Event fired to sync the open prop with the parent component",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/dialtone-vue/dialtone-vue/components/image_viewer/image_viewer.vue"]};const O={name:"DtImageViewerDefault",components:{DtImageViewer:m},data:function(){return{isOpen:this.open}},watch:{open:function(t){this.isOpen=t}}};var b=function(){var e=this,a=e._self._c;return a("dt-image-viewer",{attrs:{"image-src":e.imageSrc,"image-alt":e.imageAlt,"close-aria-label":e.closeAriaLabel,"image-button-class":e.imageButtonClass,"aria-label":e.ariaLabel,open:e.isOpen},on:{"update:open":function(i){e.isOpen=i},opened:e.onOpened}})},$=[];b._withStripped=!0;var c=n(O,b,$,!1,null,null,null,null);c.options.__file="/home/runner/work/dialtone-vue/dialtone-vue/components/image_viewer/image_viewer_default.story.vue";const B=c.exports;c.exports.__docgenInfo={displayName:"DtImageViewerDefault",exportName:"default",description:"",tags:{},sourceFiles:["/home/runner/work/dialtone-vue/dialtone-vue/components/image_viewer/image_viewer_default.story.vue"]};const p=""+new URL("test-078acfea.jpg",import.meta.url).href,q=""+new URL("fry-21e0f1a9.gif",import.meta.url).href,F={name:"DtImageViewerVariants",components:{DtImageViewer:m},data(){return{test:p,fry:q}}};var x=function(){var e=this,a=e._self._c;return a("div",{staticClass:"d-stack16"},[a("dt-image-viewer",{attrs:{"image-src":e.test,"image-alt":"Alt Text","close-aria-label":"Close","image-button-class":"d-wmn64 d-hmn64 w-wmx332 d-hmx332","aria-label":"Click to open image"}}),a("dt-image-viewer",{attrs:{"image-src":e.fry,"image-alt":"Alt Text","close-aria-label":"Close","image-button-class":"d-wmn64 d-hmn64 w-wmx332 d-hmx332","aria-label":"Click to open image"}})],1)},E=[];x._withStripped=!0;var u=n(F,x,E,!1,null,null,null,null);u.options.__file="/home/runner/work/dialtone-vue/dialtone-vue/components/image_viewer/image_viewer_variants.story.vue";const N=u.exports;u.exports.__docgenInfo={displayName:"DtImageViewerVariants",exportName:"default",description:"",tags:{},sourceFiles:["/home/runner/work/dialtone-vue/dialtone-vue/components/image_viewer/image_viewer_variants.story.vue"]};const C={onOpened:S("opened"),imageSrc:p,imageAlt:"Image Alt Text",closeAriaLabel:"Close",imageButtonClass:"d-wmn64 d-hmn64 w-wmx332 d-hmx332",ariaLabel:"Click to open image"},A={imageSrc:{description:"Url for the image",table:{category:"props",type:{summary:"string"}},control:{type:"text"}},imageAlt:{description:"Alt for image",table:{category:"props",type:{summary:"string"}},control:{type:"text"}},imageButtonClass:{description:"Image button class",table:{category:"props",type:{summary:"string"}},control:{type:"text"}},ariaLabel:{description:"Aria label for image button",table:{category:"props",type:{summary:"string"}},control:{type:"text"}},closeAriaLabel:{description:"Aria label for close",table:{category:"props",type:{summary:"string"}},control:{type:"text"}},onOpened:{table:{disable:!0}},"update:open":{table:{disable:!0}},opened:{description:"emitted when popover is shown or hidden.",table:{type:{summary:"event"}}}},M={title:"Components/Image Viewer",component:m,args:C,argTypes:A,excludeStories:/.*Data$/},R=(t,{argTypes:e})=>w(t,e,B),z=(t,{argTypes:e})=>w(t,e,N),s=R.bind({});s.args={imageSrc:p,imageAlt:"Image Alt Text",closeAriaLabel:"Close",imageButtonClass:"d-wmn64 d-hmn64 w-wmx332 d-hmx332",ariaLabel:"Click to open image"};const r=z.bind({});r.args={};r.parameters={options:{showPanel:!1},a11y:{config:{rules:[{id:"aria-allowed-attr",enabled:!1}]}}};var d,g,f;s.parameters={...s.parameters,docs:{...(d=s.parameters)==null?void 0:d.docs,source:{originalSource:`(args, {
  argTypes
}) => createTemplateFromVueFile(args, argTypes, DtImageViewerDefaultTemplate)`,...(f=(g=s.parameters)==null?void 0:g.docs)==null?void 0:f.source}}};var _,v,h;r.parameters={...r.parameters,docs:{...(_=r.parameters)==null?void 0:_.docs,source:{originalSource:`(args, {
  argTypes
}) => createTemplateFromVueFile(args, argTypes, DtImageViewerVariantsTemplate)`,...(h=(v=r.parameters)==null?void 0:v.docs)==null?void 0:h.source}}};const P=["argsData","argTypesData","Default","Variants"],J=Object.freeze(Object.defineProperty({__proto__:null,Default:s,Variants:r,__namedExportsOrder:P,argTypesData:A,argsData:C,default:M},Symbol.toStringTag,{value:"Module"}));export{m as D,J as I,C as a,A as b,s as c};
//# sourceMappingURL=image_viewer.stories-35b6ae8e.js.map
